import{a as H}from"./chunk-ATZ2GEXC.js";import{D as A,M as F,P as V,R as B,S as $,V as j,W as R,X as z,c as I,d as S,e as w,g as E,k as T,m as D}from"./chunk-WV2KONIR.js";import{Cb as _,Db as C,E as x,Fb as y,Mb as P,Nb as M,Oa as p,Ta as g,Za as O,_ as k,cb as b,k as v,ob as m,pa as l,pb as s,qa as d,qb as r,sb as u,tb as f,ub as c,w as N,x as h}from"./chunk-2JCL7S7F.js";function K(i,e){i&1&&(s(0,"div",12)(1,"h2"),_(2,"This notebook is empty."),r(),s(3,"p"),_(4,"Add some notes to get started!"),r()())}function q(i,e){if(i&1){let t=u();s(0,"app-note",18),f("open",function(o){l(t);let a=c(3);return d(a.openNote(o))})("delete",function(o){l(t);let a=c(3);return d(a.removeNoteFromNotebook(o))})("togglePin",function(o){l(t);let a=c(3);return d(a.togglePin(o.note,o.event))})("optionSelected",function(o){let a=l(t).$implicit,U=c(3);return d(U.handleNoteOption(o,a))}),r()}if(i&2){let t=e.$implicit;m("note",t)("showNotebook",!1)}}function G(i,e){if(i&1&&(s(0,"div",13)(1,"div",14)(2,"h2",15),_(3),r()(),s(4,"div",16),b(5,q,1,2,"app-note",17),r()()),i&2){let t=c().ngIf,n=c();p(3),y(" ",t.notes.length," ",t.notes.length<=1?"NOTE":"NOTES "," IN THIS NOTEBOOK "),p(2),m("ngForOf",t.notes)("ngForTrackBy",n.trackByNoteId)}}function J(i,e){if(i&1){let t=u();s(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),_(5),r()(),s(6,"div",7)(7,"app-button-feature",8),f("clicked",function(){let o=l(t).ngIf,a=c();return d(a.editNotebook(o))}),r(),s(8,"app-button-feature",9),f("clicked",function(){let o=l(t).ngIf,a=c();return d(a.deleteNotebook(o))}),r()()()(),b(9,K,5,0,"div",10)(10,G,6,4,"div",11),r()}if(i&2){let t=e.ngIf;p(5),C(t.name),p(4),m("ngIf",t.notes.length===0),p(),m("ngIf",t.notes.length>0)}}function Q(i,e){i&1&&(s(0,"div",19)(1,"h2"),_(2,"Notebook not found"),r(),s(3,"p"),_(4,"The notebook you're looking for doesn't exist."),r()())}var L=class i{constructor(e,t,n,o){this.route=e;this.router=t;this.store=n;this.eventBus=o}notebook$;notFound=!1;openNotebookOptionsId=null;destroy$=new v;ngOnInit(){this.notebook$=h([this.route.params,this.store.select(j)]).pipe(N(([e,t])=>{let n=t.find(o=>o.id===e.id);return!n&&t.length>0&&(this.notFound=!0),n}),k(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}trackByNoteId(e,t){return t.id}editNotebook(e){this.startEditingNotebook(e)}startEditingNotebook(e){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(e)}deleteNotebook(e){confirm(`Are you sure you want to delete "${e.name}"?`)&&this.store.dispatch($({id:e.id}))}openNote(e){}removeNoteFromNotebook(e){this.notebook$.pipe(x(t=>!!t),k(this.destroy$)).subscribe(t=>{if(t){let n=t.notes.filter(o=>o.id!==e);this.store.dispatch(B({update:{id:t.id,changes:{notes:n}}}))}})}togglePin(e,t){t.stopPropagation(),this.store.dispatch(V({id:e.id}))}handleNoteOption(e,t){switch(e){case"removeFromNotebook":this.removeNoteFromNotebook(t.id);break;case"delete":confirm("Are you sure you want to delete this note?")&&this.store.dispatch(F({id:t.id}));break}}static \u0275fac=function(t){return new(t||i)(g(T),g(D),g(A),g(R))};static \u0275cmp=O({type:i,selectors:[["app-notebook-detail"]],decls:3,vars:4,consts:[["class","notebook-detail",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"notebook-detail"],[1,"notebook-header"],[1,"notebook-info"],[1,"notebook-info-items"],[1,"notebook-title"],[1,"notebook-actions"],["customClass","notebook-action-button","icon","fluent:edit-28-regular","title","Edit Notebook",3,"clicked"],["customClass","notebook-action-button","icon","mage:trash","title","Delete Notebook",3,"clicked"],["class","empty-state",4,"ngIf"],["class","notes-section",4,"ngIf"],[1,"empty-state"],[1,"notes-section"],[1,"section-header"],[1,"section-title"],[1,"notes-grid"],[3,"note","showNotebook","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","optionSelected","note","showNotebook"],[1,"not-found"]],template:function(t,n){t&1&&(b(0,J,11,3,"div",0),P(1,"async"),b(2,Q,5,0,"div",1)),t&2&&(m("ngIf",M(1,2,n.notebook$)),p(2),m("ngIf",n.notFound))},dependencies:[E,I,S,w,H,z],styles:[".notebook-detail[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;box-sizing:border-box}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-info-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:0}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;justify-content:flex-start;opacity:1}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;margin:0!important;color:inherit;background-color:#a3a3a333}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--feature-button-hover-background-color);color:var(--feature-button-hover-color)}.notebook-detail[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--feature-button-color);font-size:small;font-weight:500;margin-bottom:1rem}.notebook-detail[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;height:calc(100vh - 250px);border-radius:8px;background-color:#fffffff3}.notebook-detail[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .notebook-detail[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--header-search-bar-or-section-text-color);text-align:center}.notebook-detail[_ngcontent-%COMP%]   .notes-section[_ngcontent-%COMP%]{margin-top:0}.notebook-detail[_ngcontent-%COMP%]   .notes-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-top:1.5rem}.notebook-detail[_ngcontent-%COMP%]   .notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;padding:0;margin:0}"]})};export{L as NotebookDetail};
