import{a as J}from"./chunk-H7HUAY6N.js";import{a as Q}from"./chunk-SAQTCLJY.js";import{D as U,E as M,F as z,M as q,P as K,R as W,S as H,V as Y,W as G,c as I,d as L,e as F,f as j,h as D,n as R}from"./chunk-LBENQBDS.js";import{Cb as a,Db as P,Eb as x,H as y,Lb as d,M as C,Mb as _,Na as p,Nb as B,Sa as O,Y as S,Ya as E,a as T,b as $,bb as f,db as V,l as A,nb as u,ob as l,pa as m,pb as s,qa as b,qb as g,rb as h,ub as N,vb as c,w as k,x as w}from"./chunk-WAOKH6ES.js";var X=z(J),Z=M(X,r=>r.notes),ee=M(X,r=>r.loading);function ie(r,o){r&1&&(l(0,"div",4),g(1,"i",5),a(2," Loading your content... "),s())}function ne(r,o){if(r&1){let e=h();l(0,"div",6),g(1,"iconify-icon",7),l(2,"h3"),a(3,"Welcome to Noteboard!"),s(),l(4,"p"),a(5,"Start by creating your first note or notebook"),s(),l(6,"div",8)(7,"button",9),N("click",function(){m(e);let t=c();return b(t.createNewNote())}),g(8,"iconify-icon",10),a(9," Create Note "),s(),l(10,"button",11),N("click",function(){m(e);let t=c();return b(t.createNewNotebook())}),g(11,"iconify-icon",12),a(12," Create Notebook "),s()()()}}function re(r,o){if(r&1){let e=h();l(0,"div",6),g(1,"iconify-icon",13),l(2,"h3"),a(3,"No results found"),s(),l(4,"p"),a(5,'No notes or notebooks match "'),l(6,"strong"),a(7),s(),a(8,'"'),s(),l(9,"button",11),N("click",function(){m(e);let t=c();return b(t.clearSearch())}),a(10," Clear search "),s()()}if(r&2){let e=c();p(7),P(e.searchTerm)}}function le(r,o){if(r&1){let e=h();l(0,"div",23),N("click",function(){let t=m(e).$implicit,n=c(3);return b(n.openNotebook(t))}),l(1,"div",24),g(2,"iconify-icon",25),l(3,"h3",26),a(4),s()(),l(5,"div",27)(6,"span",28),a(7),s(),l(8,"span",29),a(9),d(10,"date"),s()(),l(11,"div",30),N("click",function(t){return m(e),b(t.stopPropagation())}),l(12,"button",31),N("click",function(){let t=m(e).$implicit,n=c(3);return b(n.editNotebook(t))}),g(13,"iconify-icon",32),s(),l(14,"button",33),N("click",function(){let t=m(e).$implicit,n=c(3);return b(n.deleteNotebook(t.id))}),g(15,"iconify-icon",34),s()()()}if(r&2){let e=o.$implicit;p(4),P(e.name),p(3),x("",e.notes.length," notes"),p(2),P(B(10,3,e.createdAt,"shortDate"))}}function se(r,o){if(r&1&&(l(0,"div",16)(1,"div",17)(2,"h2",18),g(3,"iconify-icon",19),a(4," NOTEBOOKS "),s(),l(5,"span",20),a(6),d(7,"async"),s()(),l(8,"div",21),f(9,le,16,6,"div",22),d(10,"async"),s()()),r&2){let e,i=c(2);p(6),x("(",(e=_(7,3,i.notebooks$))==null?null:e.length,")"),p(3),u("ngForOf",_(10,5,i.filteredNotebooks$))("ngForTrackBy",i.trackByNotebookId)}}function ce(r,o){if(r&1){let e=h();l(0,"app-note",38),N("open",function(t){m(e);let n=c(3);return b(n.openNoteModal(t))})("delete",function(t){m(e);let n=c(3);return b(n.deleteNote(t))})("togglePin",function(t){m(e);let n=c(3);return b(n.togglePin(t.note,t.event))})("optionSelected",function(t){let n=m(e).$implicit,v=c(3);return b(v.handleNoteOptionSelected(t,n))}),s()}if(r&2){let e=o.$implicit;u("note",e)}}function ae(r,o){if(r&1&&(l(0,"div",16)(1,"div",17)(2,"h2",18),g(3,"iconify-icon",35),a(4," PINNED "),s(),l(5,"span",20),a(6),d(7,"async"),s()(),l(8,"div",36),f(9,ce,1,1,"app-note",37),d(10,"async"),s()()),r&2){let e,i=c(2);p(6),x("(",(e=_(7,3,i.pinnedNotes$))==null?null:e.length,")"),p(3),u("ngForOf",_(10,5,i.pinnedNotes$))("ngForTrackBy",i.trackByNoteId)}}function de(r,o){if(r&1){let e=h();l(0,"app-note",38),N("open",function(t){m(e);let n=c(3);return b(n.openNoteModal(t))})("delete",function(t){m(e);let n=c(3);return b(n.deleteNote(t))})("togglePin",function(t){m(e);let n=c(3);return b(n.togglePin(t.note,t.event))})("optionSelected",function(t){let n=m(e).$implicit,v=c(3);return b(v.handleNoteOptionSelected(t,n))}),s()}if(r&2){let e=o.$implicit;u("note",e)}}function pe(r,o){if(r&1&&(l(0,"div",16)(1,"div",17)(2,"h2",18),g(3,"iconify-icon",39),a(4," NOTES "),s(),l(5,"span",20),a(6),d(7,"async"),s()(),l(8,"div",36),f(9,de,1,1,"app-note",37),d(10,"async"),s()()),r&2){let e,i=c(2);p(6),x("(",(e=_(7,3,i.filteredNotes$))==null?null:e.length,")"),p(3),u("ngForOf",_(10,5,i.filteredNotes$))("ngForTrackBy",i.trackByNoteId)}}function _e(r,o){if(r&1&&(l(0,"div",14),f(1,se,11,7,"div",15),d(2,"async"),f(3,ae,11,7,"div",15),d(4,"async"),f(5,pe,11,7,"div",15),d(6,"async"),s()),r&2){let e=c();p(),u("ngIf",_(2,3,e.hasNotebooks$)&&!e.selectedNotebook),p(2),u("ngIf",_(4,5,e.hasPins$)&&!e.selectedNotebook),p(2),u("ngIf",_(6,7,e.hasUnpinnedNotes$)&&!e.selectedNotebook)}}var te=class r{constructor(o,e,i){this.store=o;this.eventBus=e;this.router=i;this.isLoading$=this.store.select(ee),this.allNotes$=this.store.select(Z),this.notebooks$=this.store.select(Y),this.filteredNotes$=w([this.allNotes$,this.searchTermSubject.asObservable().pipe(y(300),C(),S(""))]).pipe(k(([t,n])=>this.filterNotes(t.filter(v=>!v.pinned),n))),this.pinnedNotes$=w([this.allNotes$.pipe(k(t=>t.filter(n=>n.pinned))),this.searchTermSubject.asObservable().pipe(y(300),C(),S(""))]).pipe(k(([t,n])=>this.filterNotes(t,n))),this.filteredNotebooks$=w([this.notebooks$,this.searchTermSubject.asObservable().pipe(y(300),C(),S(""))]).pipe(k(([t,n])=>this.filterNotebooks(t,n))),this.hasNotes$=this.allNotes$.pipe(k(t=>t.length>0)),this.hasNotebooks$=this.notebooks$.pipe(k(t=>t.length>0)),this.hasPins$=this.pinnedNotes$.pipe(k(t=>t.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(k(t=>t.length>0))}noteSelected=new V;notebookSelected=new V;editNotebookRequested=new V;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;searchTermSubject=new A("");ngOnInit(){}onSearchTermChange(o){this.searchTerm=o,this.searchTermSubject.next(o)}filterNotes(o,e){let i=o;if(e){let t=e.toLowerCase();i=o.filter(n=>n.title.toLowerCase().includes(t)||n.content.toLowerCase().includes(t))}try{return[...i].sort((t,n)=>(n.createdAt||0)-(t.createdAt||0))}catch(t){return console.error("Sorting failed:",t,i),i}}openNoteModal(o){this.eventBus.emitNoteSelected(o)}deleteNote(o){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(q({id:o}))}togglePin(o,e){e.stopPropagation(),this.store.dispatch(K({id:o.id}))}filterNotebooks(o,e){if(!e)return o;let i=e.toLowerCase();return o.filter(t=>t.name.toLowerCase().includes(i))}selectNotebook(o){this.selectedNotebook=o,this.eventBus.emitNotebookSelected(o)}deleteNotebook(o){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(H({id:o}))}closeNotebook(){this.selectedNotebook=null}toggleNotebookOptions(o){this.openNotebookOptionsId=this.openNotebookOptionsId===o?null:o}startEditingNotebook(o){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(o)}handleNoteOptionSelected(o,e){switch(o){case"addToNotebook":this.openAddToNotebookModal(e);break;case"delete":this.deleteNote(e.id);break}}openAddToNotebookModal(o){this.notebooks$.subscribe(e=>{let i=e.map(v=>v.name).join(", "),t=prompt(`Enter notebook name to add note to (available: ${i}):`);if(!t)return;let n=e.find(v=>v.name.toLowerCase()===t.toLowerCase());if(!n){alert("Notebook not found!");return}this.addNoteToNotebook(o,n)}).unsubscribe()}addNoteToNotebook(o,e){if(e.notes.some(n=>n.id===o.id)){alert("Note already in this notebook");return}let i={id:o.id,title:o.title||"Untitled Note",content:o.content||"",color:o.color,pinned:o.pinned,createdAt:o.createdAt},t=$(T({},e),{notes:[...e.notes,i],updatedAt:Date.now()});this.store.dispatch(W({update:{id:t.id,changes:{notes:t.notes}}}))}trackByNotebookId(o,e){return e.id}trackByNoteId(o,e){return e.id}createNewNote(){this.eventBus.emitCreateNote()}createNewNotebook(){this.eventBus.emitCreateNotebook()}clearSearch(){this.searchTerm="",this.searchTermSubject.next("")}openNotebook(o){this.router.navigate(["/notebooks",o.id])}editNotebook(o){this.startEditingNotebook(o)}static \u0275fac=function(e){return new(e||r)(O(U),O(G),O(R))};static \u0275cmp=E({type:r,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:13,vars:20,consts:[[1,"all-view"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","content-sections",4,"ngIf"],[1,"loading-state"],[1,"bi","bi-arrow-clockwise"],[1,"empty-state"],["icon","fluent:notebook-add-20-regular",1,"empty-icon"],[1,"empty-actions"],[1,"primary-button",3,"click"],["icon","fluent:note-add-16-regular"],[1,"secondary-button",3,"click"],["icon","fluent:notebook-add-20-regular"],["icon","bi:search",1,"empty-icon"],[1,"content-sections"],["class","section",4,"ngIf"],[1,"section"],[1,"section-header"],[1,"section-title"],["icon","hugeicons:notebook-01"],[1,"section-count"],[1,"notebooks-grid"],["class","notebook-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notebook-card",3,"click"],[1,"notebook-header"],["icon","fluent:notebook-subsection-24-filled",1,"notebook-icon"],[1,"notebook-title"],[1,"notebook-meta"],[1,"note-count"],[1,"created-date"],[1,"notebook-actions",3,"click"],["title","Edit",3,"click"],["icon","fluent:edit-12-regular"],["title","Delete",3,"click"],["icon","ph:trash"],["icon","bi:pin-fill"],[1,"notes-grid"],[3,"note","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","optionSelected","note"],["icon","fluent:note-48-regular"]],template:function(e,i){if(e&1&&(l(0,"div",0),f(1,ie,3,0,"div",1),d(2,"async"),f(3,ne,13,0,"div",2),d(4,"async"),d(5,"async"),d(6,"async"),f(7,re,11,1,"div",2),d(8,"async"),d(9,"async"),d(10,"async"),f(11,_e,7,9,"div",3),d(12,"async"),s()),e&2){let t;p(),u("ngIf",_(2,4,i.isLoading$)),p(2),u("ngIf",!_(4,6,i.isLoading$)&&!_(5,8,i.hasNotes$)&&!_(6,10,i.hasNotebooks$)),p(4),u("ngIf",!_(8,12,i.isLoading$)&&i.searchTerm&&((t=_(9,14,i.filteredNotes$))==null?null:t.length)===0&&((t=_(10,16,i.filteredNotebooks$))==null?null:t.length)===0),p(4),u("ngIf",!_(12,18,i.isLoading$))}},dependencies:[D,I,L,F,j,Q],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;box-sizing:border-box}.secondary-bacgkround[_ngcontent-%COMP%]{position:absolute;background-color:red;top:0;height:50%;width:50%}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--feature-button-color);font-weight:600;margin-bottom:1rem}.notebooks-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:1.5rem}.notebooks-row[_ngcontent-%COMP%]   .notebook-item[_ngcontent-%COMP%]{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:18px;cursor:pointer;transition:all .2s ease;position:relative}.notebooks-row[_ngcontent-%COMP%]   .notebook-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}.notebooks-row[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column}.notebooks-row[_ngcontent-%COMP%]   iconify-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#4e4e4e99;font-size:2rem;margin-bottom:1rem}.notebooks-row[_ngcontent-%COMP%]   .icon-hover[_ngcontent-%COMP%], .notebooks-row[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]:hover   .icon-default[_ngcontent-%COMP%]{display:none}.notebooks-row[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]:hover   .icon-hover[_ngcontent-%COMP%]{display:inline-block}.notebooks-row[_ngcontent-%COMP%]   .ntbk-three-dots[_ngcontent-%COMP%]{top:14px;right:14px;background-color:transparent;padding:2px 6px;border:none;border-radius:8px;color:var(--feature-button-color);opacity:0}.notebooks-row[_ngcontent-%COMP%]   .ntbk-three-dots[_ngcontent-%COMP%]:hover{color:var(--feature-button-hover-color);background-color:var(--feature-button-hover-background-color)}.notebooks-row[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;bottom:-50px;right:0;background:#fff;border:1px solid #ccc;z-index:1000;padding:0;box-shadow:0 4px 8px #0000001a;min-width:120px;display:flex;flex-direction:column;gap:2px}.notebooks-row[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;text-align:left;background:none;border:none;border-radius:0;padding:4px 12px;width:100%;cursor:pointer}.notebooks-row[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.notebooks-row[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#6b7280;font-size:.875rem;margin:0}.notebooks-row[_ngcontent-%COMP%]   .notebook-item[_ngcontent-%COMP%]:hover   .ntbk-three-dots[_ngcontent-%COMP%]{opacity:1}.notes-grid[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;padding:0;margin:0;list-style-type:none}.close-button-container[_ngcontent-%COMP%]{margin:0;padding:0;flex-direction:row;align-items:center;justify-content:center;position:absolute;top:0;right:0;z-index:1099;display:flex;flex-direction:column;gap:2px}"]})};export{te as AllView};
