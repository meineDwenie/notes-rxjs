import{a as ee}from"./chunk-JMSEOVOH.js";import{g as z,m as T,n as Y,q as G,r as X,s as Z}from"./chunk-DTV7VGZ7.js";import{B as J,C as Q,D as E,n as R,v as q,w as H,x as K,y as W}from"./chunk-5JRNSULR.js";import{j as L,k as U,m as D,o as j}from"./chunk-VGKXMW7M.js";import{H as O,Hb as b,Ib as $,J as A,Kb as F,M as x,Oa as a,Sb as d,Ta as P,Tb as p,Za as B,a as S,b as V,cb as f,eb as M,pa as m,qa as g,qb as _,rb as r,sb as c,tb as h,w as u,wb as w,x as C,xb as k,yb as l}from"./chunk-AS2QI5Q4.js";function oe(s,t){s&1&&(r(0,"div",5),h(1,"i",6),b(2," Loading your content... "),c())}function ne(s,t){s&1&&(r(0,"div",7)(1,"div",8),h(2,"i",9),c(),r(3,"h2"),b(4,"Welcome to Noteboard!"),c(),r(5,"p"),b(6,"Start by creating your first note or notebook."),c()())}function ie(s,t){if(s&1&&(r(0,"div",7)(1,"div",8),h(2,"i",10),c(),r(3,"h3"),b(4,"No results found"),c(),r(5,"p"),b(6,'No notes or notebooks match "'),r(7,"strong"),b(8),c(),b(9,'"'),c()()),s&2){let e=l();a(8),$(e.searchTerm)}}function se(s,t){if(s&1){let e=w();r(0,"div",19),k("click",function(){let o=m(e).$implicit,n=l(4);return g(n.openNotebook(o))}),r(1,"div",20),h(2,"iconify-icon",21)(3,"iconify-icon",22),r(4,"h3",23),b(5),c()(),r(6,"div",24)(7,"span",25),b(8),c(),r(9,"div",26),k("click",function(o){return m(e),g(o.stopPropagation())}),r(10,"app-button-feature",27),k("clicked",function(){let o=m(e).$implicit,n=l(4);return g(n.editNotebook(o))}),c(),r(11,"app-button-feature",28),k("clicked",function(){let o=m(e).$implicit,n=l(4);return g(n.deleteNotebook(o.id))}),c()()()()}if(s&2){let e=t.$implicit;a(5),$(e.name),a(3),F("",e.notes.length," ",e.notes.length<=1?"note":"notes ")}}function re(s,t){if(s&1&&(r(0,"div",14)(1,"div",15)(2,"h2",16),b(3,"NOTEBOOKS"),c()(),r(4,"div",17),f(5,se,12,3,"div",18),d(6,"async"),c()()),s&2){let e=l(3);a(5),_("ngForOf",p(6,2,e.filteredNotebooks$))("ngForTrackBy",e.trackByNotebookId)}}function ce(s,t){if(s&1){let e=w();r(0,"app-note",31),k("open",function(o){m(e);let n=l(4);return g(n.openNoteModal(o))})("delete",function(o){m(e);let n=l(4);return g(n.deleteNote(o))})("togglePin",function(o){m(e);let n=l(4);return g(n.togglePin(o.note,o.event))})("imageUpload",function(o){m(e);let n=l(4);return g(n.handleImageUpload(o))}),c()}if(s&2){let e=t.$implicit;_("note",e)}}function le(s,t){if(s&1&&(r(0,"div",14)(1,"div",15)(2,"h2",16),b(3,"PINNED"),c()(),r(4,"div",29),f(5,ce,1,1,"app-note",30),d(6,"async"),c()()),s&2){let e=l(3);a(5),_("ngForOf",p(6,2,e.pinnedNotes$))("ngForTrackBy",e.trackByNoteId)}}function ae(s,t){if(s&1){let e=w();r(0,"app-note",31),k("open",function(o){m(e);let n=l(4);return g(n.openNoteModal(o))})("delete",function(o){m(e);let n=l(4);return g(n.deleteNote(o))})("togglePin",function(o){m(e);let n=l(4);return g(n.togglePin(o.note,o.event))})("imageUpload",function(o){m(e);let n=l(4);return g(n.handleImageUpload(o))}),c()}if(s&2){let e=t.$implicit;_("note",e)}}function de(s,t){if(s&1&&(r(0,"div",14)(1,"div",15)(2,"h2",16),b(3,"NOTES"),c()(),r(4,"div",29),f(5,ae,1,1,"app-note",30),d(6,"async"),c()()),s&2){let e=l(3);a(5),_("ngForOf",p(6,2,e.filteredNotes$))("ngForTrackBy",e.trackByNoteId)}}function pe(s,t){if(s&1&&(r(0,"div"),f(1,re,7,4,"div",13)(2,le,7,4,"div",13),d(3,"async"),f(4,de,7,4,"div",13),d(5,"async"),c()),s&2){let e=t.ngIf,i=l(2);a(),_("ngIf",e.length>0&&!i.selectedNotebook),a(),_("ngIf",p(3,3,i.hasPins$)&&!i.selectedNotebook),a(2),_("ngIf",p(5,5,i.hasUnpinnedNotes$)&&!i.selectedNotebook)}}function _e(s,t){if(s&1&&(r(0,"div",11),f(1,pe,6,7,"div",12),d(2,"async"),c()),s&2){let e=l();a(),_("ngIf",p(2,1,e.filteredNotebooks$))}}var te=class s{constructor(t,e,i){this.store=t;this.eventBus=e;this.router=i;this.isLoading$=this.store.select(Q),this.allNotes$=this.store.select(J),this.notebooks$=this.store.select(G);let o=this.store.select(E);this.filteredNotes$=C([this.allNotes$,o.pipe(O(300),x())]).pipe(u(([n,v])=>this.filterNotes(n.filter(N=>!N.pinned),v))),this.pinnedNotes$=C([this.allNotes$.pipe(u(n=>n.filter(v=>v.pinned))),o.pipe(O(300),x())]).pipe(u(([n,v])=>this.filterNotes(n,v))),this.filteredNotebooks$=C([this.notebooks$,o.pipe(O(300),x())]).pipe(u(([n,v])=>this.filterNotebooks(n,v))),this.hasNotes$=this.allNotes$.pipe(u(n=>n.length>0)),this.hasNotebooks$=this.notebooks$.pipe(u(n=>n.length>0)),this.hasPins$=this.pinnedNotes$.pipe(u(n=>n.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(u(n=>n.length>0)),this.store.select(E).subscribe(n=>{this.searchTerm=n})}noteSelected=new M;notebookSelected=new M;editNotebookRequested=new M;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;ngOnInit(){}filterNotes(t,e){let i=t;if(e){let o=e.toLowerCase();i=t.filter(n=>n.title.toLowerCase().includes(o)||n.content.toLowerCase().includes(o))}try{return[...i].sort((o,n)=>(n.createdAt||0)-(o.createdAt||0))}catch(o){return console.error("Sorting failed:",o,i),i}}openNoteModal(t){this.eventBus.emitNoteSelected(t)}deleteNote(t){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(H({id:t}))}togglePin(t,e){e.stopPropagation(),this.store.dispatch(K({id:t.id}))}handleImageUpload(t){this.filteredNotes$.pipe(A(1)).subscribe(e=>{let i=e.find(o=>o.id===t.noteId);if(i){let o=[...i.images||[],...t.images],n={id:i.id,changes:{images:o,updatedAt:Date.now()}};this.store.dispatch(q({update:n})),this.notebooks$.pipe(u(v=>v.filter(N=>N.notes.some(y=>y.id===i.id))),A(1)).subscribe(v=>{v.forEach(N=>{let y=N.notes.map(I=>I.id===i.id?V(S({},i),{images:o,updatedAt:Date.now()}):I);this.store.dispatch(T({update:{id:N.id,changes:{notes:y}}}))})})}})}filterNotebooks(t,e){if(!e)return t;let i=e.toLowerCase();return t.filter(o=>o.name.toLowerCase().includes(i))}selectNotebook(t){this.selectedNotebook=t,this.eventBus.emitNotebookSelected(t)}deleteNotebook(t){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(Y({id:t}))}closeNotebook(){this.selectedNotebook=null}startEditingNotebook(t){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(t)}addNoteToNotebook(t,e){if(e.notes.some(n=>n.id===t.id)){alert("Note already in this notebook");return}let i={id:t.id,title:t.title||"Untitled Note",content:t.content||"",color:t.color,pinned:t.pinned,createdAt:t.createdAt},o=V(S({},e),{notes:[...e.notes,i],updatedAt:Date.now()});this.store.dispatch(T({update:{id:o.id,changes:{notes:o.notes}}}))}trackByNotebookId(t,e){return e.id}trackByNoteId(t,e){return e.id}createNewNote(){this.eventBus.emitCreateNote()}createNewNotebook(){this.eventBus.emitCreateNotebook()}clearSearch(){this.searchTerm="",this.store.dispatch(W({term:""}))}openNotebook(t){this.router.navigate(["/notebooks",t.id])}editNotebook(t){this.startEditingNotebook(t)}static \u0275fac=function(e){return new(e||s)(P(R),P(X),P(z))};static \u0275cmp=B({type:s,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:14,vars:20,consts:[[1,"all-view"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"content-container"],["class","content-sections",4,"ngIf"],[1,"loading-state"],[1,"bi","bi-arrow-clockwise"],[1,"empty-state"],[1,"empty-icon"],[1,"bi","bi-chat-quote",2,"font-size","3rem","color","#ccc"],[1,"bi","bi-search",2,"font-size","3rem","color","#ccc"],[1,"content-sections"],[4,"ngIf"],["class","section",4,"ngIf"],[1,"section"],[1,"section-header"],[1,"section-title"],[1,"notebooks-grid"],["class","notebook-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notebook-card",3,"click"],[1,"notebook-header"],["icon","fluent:notebook-subsection-24-filled",1,"notebook-icon","default-icon"],["icon","solar:notebook-minimalistic-bold",1,"notebook-icon","hover-icon"],[1,"notebook-title"],[1,"notebook-meta"],[1,"note-count"],[1,"notebook-actions",3,"click"],["customClass","notebook-action-button","icon","fluent:edit-28-regular","title","Edit Notebook",3,"clicked"],["customClass","notebook-action-button","icon","mage:trash","title","Delete Notebook",3,"clicked"],[1,"notes-grid"],[3,"note","open","delete","togglePin","imageUpload",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","imageUpload","note"]],template:function(e,i){if(e&1&&(r(0,"div",0),f(1,oe,3,0,"div",1),d(2,"async"),f(3,ne,7,0,"div",2),d(4,"async"),d(5,"async"),d(6,"async"),f(7,ie,10,1,"div",2),d(8,"async"),d(9,"async"),d(10,"async"),h(11,"div",3),f(12,_e,3,3,"div",4),d(13,"async"),c()),e&2){let o;a(),_("ngIf",p(2,4,i.isLoading$)),a(2),_("ngIf",!p(4,6,i.isLoading$)&&!p(5,8,i.hasNotes$)&&!p(6,10,i.hasNotebooks$)),a(4),_("ngIf",!p(8,12,i.isLoading$)&&i.searchTerm&&((o=p(9,14,i.filteredNotes$))==null?null:o.length)===0&&((o=p(10,16,i.filteredNotebooks$))==null?null:o.length)===0),a(5),_("ngIf",!p(13,18,i.isLoading$))}},dependencies:[j,L,U,D,ee,Z],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 3rem;width:calc(100% - 400px);height:auto;min-height:calc(100vh - 130px);margin-left:340px;margin-top:96px;margin-bottom:2rem;border:none;border-radius:20px;align-items:center;justify-content:center;box-sizing:border-box;background-color:#fff}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;height:calc(100vh - 240px);margin-top:0;border-radius:8px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--header-search-bar-or-section-text-color);text-align:center}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:600}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#000;font-size:1rem;font-weight:700;margin-bottom:1rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:1.5rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:18px;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 6px #43868626;position:relative}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover{border:2px solid #96b8b8;background:#edffff;box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#43868670;font-size:1.5rem;margin-bottom:.5rem;transition:opacity .2s ease;transition:transform .2s ease,opacity .2s ease}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-title[_ngcontent-%COMP%]{font-size:medium;margin:0;color:#000000d7;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-height:160px;white-space:pre-wrap}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-title[_ngcontent-%COMP%]{color:var(--sidebar-gradient-color3)}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-actions[_ngcontent-%COMP%]{opacity:1}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#828282c2;font-size:.875rem;margin:0}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]{display:flex;gap:0;align-items:center;opacity:0}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   .notebook-action-button[_ngcontent-%COMP%]{align-items:center;margin:0!important}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .default-icon[_ngcontent-%COMP%]{display:block}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .hover-icon[_ngcontent-%COMP%], .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .default-icon[_ngcontent-%COMP%]{display:none}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .hover-icon[_ngcontent-%COMP%]{display:block;color:#438686}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1.5rem;padding:0;margin:0}"]})};export{te as AllView};
