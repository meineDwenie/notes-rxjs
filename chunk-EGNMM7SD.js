import{a as L}from"./chunk-DHQ44ZRH.js";import{D as F,M as V,P as B,R as $,S as j,V as R,W as z,X as H,c as M,d as w,e as E,g as D,k as T,m as A}from"./chunk-QDPMBAW3.js";import{Cb as c,Db as O,E as h,Eb as P,Lb as S,Mb as I,Oa as m,Ta as b,Za as y,_ as u,cb as f,k as v,ob as _,pa as d,pb as r,qa as p,qb as a,rb as C,sb as k,tb as g,ub as l,w as N,x}from"./chunk-FWAODUN6.js";function q(i,t){i&1&&(r(0,"div",13),C(1,"iconify-icon",14),r(2,"h3"),c(3,"This notebook is empty"),a(),r(4,"p"),c(5,"Add some notes to get started"),a()())}function G(i,t){if(i&1){let e=k();r(0,"app-note",20),g("open",function(o){d(e);let s=l(3);return p(s.openNote(o))})("delete",function(o){d(e);let s=l(3);return p(s.removeNoteFromNotebook(o))})("togglePin",function(o){d(e);let s=l(3);return p(s.togglePin(o.note,o.event))})("optionSelected",function(o){let s=d(e).$implicit,K=l(3);return p(K.handleNoteOption(o,s))}),a()}if(i&2){let e=t.$implicit;_("note",e)("showNotebook",!1)}}function J(i,t){if(i&1&&(r(0,"div",15)(1,"div",16)(2,"h2",17),c(3,"NOTES IN THIS NOTEBOOK"),a()(),r(4,"div",18),f(5,G,1,2,"app-note",19),a()()),i&2){let e=l().ngIf,n=l();m(5),_("ngForOf",e.notes)("ngForTrackBy",n.trackByNoteId)}}function Q(i,t){if(i&1){let e=k();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),c(5),a(),r(6,"p",7),c(7),a()(),r(8,"div",8)(9,"app-button-feature",9),g("clicked",function(){let o=d(e).ngIf,s=l();return p(s.editNotebook(o))}),a(),r(10,"app-button-feature",10),g("clicked",function(){let o=d(e).ngIf,s=l();return p(s.deleteNotebook(o))}),a()()()(),f(11,q,6,0,"div",11)(12,J,6,2,"div",12),a()}if(i&2){let e=t.ngIf;m(5),O(e.name),m(2),P("",e.notes.length," notes"),m(4),_("ngIf",e.notes.length===0),m(),_("ngIf",e.notes.length>0)}}function W(i,t){i&1&&(r(0,"div",21)(1,"h2"),c(2,"Notebook not found"),a(),r(3,"p"),c(4,"The notebook you're looking for doesn't exist."),a()())}var U=class i{constructor(t,e,n,o){this.route=t;this.router=e;this.store=n;this.eventBus=o}notebook$;notFound=!1;openNotebookOptionsId=null;destroy$=new v;ngOnInit(){this.notebook$=x([this.route.params,this.store.select(R)]).pipe(N(([t,e])=>{let n=e.find(o=>o.id===t.id);return!n&&e.length>0&&(this.notFound=!0),n}),u(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}trackByNoteId(t,e){return e.id}editNotebook(t){this.startEditingNotebook(t)}startEditingNotebook(t){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(t)}deleteNotebook(t){confirm(`Are you sure you want to delete "${t.name}"?`)&&this.store.dispatch(j({id:t.id}))}openNote(t){}removeNoteFromNotebook(t){this.notebook$.pipe(h(e=>!!e),u(this.destroy$)).subscribe(e=>{if(e){let n=e.notes.filter(o=>o.id!==t);this.store.dispatch($({update:{id:e.id,changes:{notes:n}}}))}})}togglePin(t,e){e.stopPropagation(),this.store.dispatch(B({id:t.id}))}handleNoteOption(t,e){switch(t){case"removeFromNotebook":this.removeNoteFromNotebook(e.id);break;case"delete":confirm("Are you sure you want to delete this note?")&&this.store.dispatch(V({id:e.id}));break}}static \u0275fac=function(e){return new(e||i)(b(T),b(A),b(F),b(z))};static \u0275cmp=y({type:i,selectors:[["app-notebook-detail"]],decls:3,vars:4,consts:[["class","notebook-detail",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"notebook-detail"],[1,"notebook-header"],[1,"notebook-info"],[1,"notebook-info-items"],[1,"notebook-title"],[1,"notebook-meta"],[1,"notebook-actions"],["customClass","notebook-action-button","icon","fluent:edit-28-regular","title","Edit Notebook",3,"clicked"],["customClass","notebook-action-button","icon","mage:trash","title","Delete Notebook",3,"clicked"],["class","empty-state",4,"ngIf"],["class","notes-section",4,"ngIf"],[1,"empty-state"],["icon","fluent:notebook-subsection-24-regular",1,"empty-icon"],[1,"notes-section"],[1,"section-header"],[1,"section-title"],[1,"notes-grid"],[3,"note","showNotebook","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","optionSelected","note","showNotebook"],[1,"not-found"]],template:function(e,n){e&1&&(f(0,Q,13,4,"div",0),S(1,"async"),f(2,W,5,0,"div",1)),e&2&&(_("ngIf",I(1,2,n.notebook$)),m(2),_("ngIf",n.notFound))},dependencies:[D,M,w,E,L,H],styles:[".notebook-detail[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;box-sizing:border-box}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-info-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;justify-content:flex-start;opacity:1}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-items:center;margin:0!important;color:inherit;background-color:#a3a3a333}.notebook-detail[_ngcontent-%COMP%]   .notebook-info[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--feature-button-hover-background-color);color:var(--feature-button-hover-color)}.notebook-detail[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--feature-button-color);font-size:small;font-weight:500;margin-bottom:1rem}.notebook-detail[_ngcontent-%COMP%]   .notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;padding:0;margin:0}"]})};export{U as NotebookDetail};
