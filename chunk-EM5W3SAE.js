import{B as $,D as b,n as v,v as N,w as m,x as f}from"./chunk-UTTUXEGN.js";import{Kb as p,Ta as h,Za as c,_ as s,k as n,w as i,x as a,xb as d,yb as l}from"./chunk-AU3GP5MI.js";var u=class r{constructor(e){this.store=e}allNotes$;searchTerm$;archivedNotes$;filteredArchivedNotes$;pinnedArchivedNotes$;unpinnedArchivedNotes$;hasArchivedNotes$;hasPinnedArchivedNotes$;hasUnpinnedArchivedNotes$;hasSearchResults$;destroy$=new n;ngOnInit(){this.allNotes$=this.store.select($),this.searchTerm$=this.store.select(b),this.archivedNotes$=this.allNotes$.pipe(i(e=>e.filter(t=>t.archived===!0)),s(this.destroy$)),this.filteredArchivedNotes$=a([this.archivedNotes$,this.searchTerm$]).pipe(i(([e,t])=>t.trim()?e.filter(o=>o.title.toLowerCase().includes(t.toLowerCase())||o.content.toLowerCase().includes(t.toLowerCase())):e),s(this.destroy$)),this.pinnedArchivedNotes$=this.filteredArchivedNotes$.pipe(i(e=>e.filter(t=>t.pinned))),this.unpinnedArchivedNotes$=this.filteredArchivedNotes$.pipe(i(e=>e.filter(t=>!t.pinned))),this.hasArchivedNotes$=this.archivedNotes$.pipe(i(e=>e.length>0)),this.hasPinnedArchivedNotes$=this.pinnedArchivedNotes$.pipe(i(e=>e.length>0)),this.hasUnpinnedArchivedNotes$=this.unpinnedArchivedNotes$.pipe(i(e=>e.length>0)),this.hasSearchResults$=this.filteredArchivedNotes$.pipe(i(e=>e.length>0))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}trackByNoteId(e,t){return t.id}restoreNote(e){confirm("Restore this note from archive?")&&this.store.dispatch(N({update:{id:e.id,changes:{archived:!1}}}))}deleteNote(e){confirm("Permanently delete this note?")&&this.store.dispatch(m({id:e}))}togglePin(e,t){t.stopPropagation(),this.store.dispatch(f({id:e.id}))}static \u0275fac=function(t){return new(t||r)(h(v))};static \u0275cmp=c({type:r,selectors:[["app-archive-view"]],decls:2,vars:0,template:function(t,o){t&1&&(d(0,"p"),p(1,"archive-view works!"),l())},encapsulation:2})};export{u as ArchiveView};
