import{a as G}from"./chunk-UEJ362RW.js";import{a as J}from"./chunk-YG2JJNAG.js";import{D,E as y,F as z,M as R,P as U,R as q,S as K,V as W,W as H,Y,c as B,d as I,e as L,h as F,n as j}from"./chunk-7LVFCTYT.js";import{Cb as b,Db as S,Eb as E,H as C,Lb as a,M as O,Mb as d,Na as m,Sa as P,Y as w,Ya as A,a as V,b as T,bb as u,db as M,l as $,nb as g,ob as s,pa as p,pb as c,qa as _,qb as v,rb as h,ub as N,vb as l,w as f,x}from"./chunk-WAOKH6ES.js";var Q=z(G),X=y(Q,i=>i.notes),Z=y(Q,i=>i.loading);function oe(i,o){i&1&&(s(0,"div",4),v(1,"i",5),b(2," Loading your content... "),c())}function ne(i,o){i&1&&(s(0,"div",6),v(1,"iconify-icon",7),s(2,"h3"),b(3,"Welcome to Noteboard!"),c(),s(4,"p"),b(5,"Start by creating your first note or notebook"),c()())}function ie(i,o){if(i&1){let e=h();s(0,"div",6),v(1,"iconify-icon",8),s(2,"h3"),b(3,"No results found"),c(),s(4,"p"),b(5,'No notes or notebooks match "'),s(6,"strong"),b(7),c(),b(8,'"'),c(),s(9,"button",9),N("click",function(){p(e);let t=l();return _(t.clearSearch())}),b(10," Clear search "),c()()}if(i&2){let e=l();m(7),S(e.searchTerm)}}function re(i,o){if(i&1){let e=h();s(0,"div",17),N("click",function(){let t=p(e).$implicit,n=l(3);return _(n.openNotebook(t))}),s(1,"div",18),v(2,"iconify-icon",19),s(3,"h3",20),b(4),c()(),s(5,"div",21)(6,"span",22),b(7),c(),s(8,"div",23),N("click",function(t){return p(e),_(t.stopPropagation())}),s(9,"app-button-feature",24),N("clicked",function(){let t=p(e).$implicit,n=l(3);return _(n.editNotebook(t))}),c(),s(10,"app-button-feature",25),N("clicked",function(){let t=p(e).$implicit,n=l(3);return _(n.deleteNotebook(t.id))}),c()()()()}if(i&2){let e=o.$implicit;m(4),S(e.name),m(3),E("",e.notes.length," notes")}}function se(i,o){if(i&1&&(s(0,"div",12)(1,"div",13)(2,"h2",14),b(3,"NOTEBOOKS"),c()(),s(4,"div",15),u(5,re,11,2,"div",16),a(6,"async"),c()()),i&2){let e=l(2);m(5),g("ngForOf",d(6,2,e.filteredNotebooks$))("ngForTrackBy",e.trackByNotebookId)}}function ce(i,o){if(i&1){let e=h();s(0,"app-note",28),N("open",function(t){p(e);let n=l(3);return _(n.openNoteModal(t))})("delete",function(t){p(e);let n=l(3);return _(n.deleteNote(t))})("togglePin",function(t){p(e);let n=l(3);return _(n.togglePin(t.note,t.event))})("optionSelected",function(t){let n=p(e).$implicit,k=l(3);return _(k.handleNoteOptionSelected(t,n))}),c()}if(i&2){let e=o.$implicit;g("note",e)}}function le(i,o){if(i&1&&(s(0,"div",12)(1,"div",13)(2,"h2",14),b(3,"PINNED"),c()(),s(4,"div",26),u(5,ce,1,1,"app-note",27),a(6,"async"),c()()),i&2){let e=l(2);m(5),g("ngForOf",d(6,2,e.pinnedNotes$))("ngForTrackBy",e.trackByNoteId)}}function ae(i,o){if(i&1){let e=h();s(0,"app-note",28),N("open",function(t){p(e);let n=l(3);return _(n.openNoteModal(t))})("delete",function(t){p(e);let n=l(3);return _(n.deleteNote(t))})("togglePin",function(t){p(e);let n=l(3);return _(n.togglePin(t.note,t.event))})("optionSelected",function(t){let n=p(e).$implicit,k=l(3);return _(k.handleNoteOptionSelected(t,n))}),c()}if(i&2){let e=o.$implicit;g("note",e)}}function de(i,o){if(i&1&&(s(0,"div",12)(1,"div",13)(2,"h2",14),b(3,"NOTES"),c()(),s(4,"div",26),u(5,ae,1,1,"app-note",27),a(6,"async"),c()()),i&2){let e=l(2);m(5),g("ngForOf",d(6,2,e.filteredNotes$))("ngForTrackBy",e.trackByNoteId)}}function pe(i,o){if(i&1&&(s(0,"div",10),u(1,se,7,4,"div",11),a(2,"async"),u(3,le,7,4,"div",11),a(4,"async"),u(5,de,7,4,"div",11),a(6,"async"),c()),i&2){let e=l();m(),g("ngIf",d(2,3,e.hasNotebooks$)&&!e.selectedNotebook),m(2),g("ngIf",d(4,5,e.hasPins$)&&!e.selectedNotebook),m(2),g("ngIf",d(6,7,e.hasUnpinnedNotes$)&&!e.selectedNotebook)}}var ee=class i{constructor(o,e,r){this.store=o;this.eventBus=e;this.router=r;this.isLoading$=this.store.select(Z),this.allNotes$=this.store.select(X),this.notebooks$=this.store.select(W),this.filteredNotes$=x([this.allNotes$,this.searchTermSubject.asObservable().pipe(C(300),O(),w(""))]).pipe(f(([t,n])=>this.filterNotes(t.filter(k=>!k.pinned),n))),this.pinnedNotes$=x([this.allNotes$.pipe(f(t=>t.filter(n=>n.pinned))),this.searchTermSubject.asObservable().pipe(C(300),O(),w(""))]).pipe(f(([t,n])=>this.filterNotes(t,n))),this.filteredNotebooks$=x([this.notebooks$,this.searchTermSubject.asObservable().pipe(C(300),O(),w(""))]).pipe(f(([t,n])=>this.filterNotebooks(t,n))),this.hasNotes$=this.allNotes$.pipe(f(t=>t.length>0)),this.hasNotebooks$=this.notebooks$.pipe(f(t=>t.length>0)),this.hasPins$=this.pinnedNotes$.pipe(f(t=>t.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(f(t=>t.length>0))}noteSelected=new M;notebookSelected=new M;editNotebookRequested=new M;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;searchTermSubject=new $("");ngOnInit(){}onSearchTermChange(o){this.searchTerm=o,this.searchTermSubject.next(o)}filterNotes(o,e){let r=o;if(e){let t=e.toLowerCase();r=o.filter(n=>n.title.toLowerCase().includes(t)||n.content.toLowerCase().includes(t))}try{return[...r].sort((t,n)=>(n.createdAt||0)-(t.createdAt||0))}catch(t){return console.error("Sorting failed:",t,r),r}}openNoteModal(o){this.eventBus.emitNoteSelected(o)}deleteNote(o){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(R({id:o}))}togglePin(o,e){e.stopPropagation(),this.store.dispatch(U({id:o.id}))}filterNotebooks(o,e){if(!e)return o;let r=e.toLowerCase();return o.filter(t=>t.name.toLowerCase().includes(r))}selectNotebook(o){this.selectedNotebook=o,this.eventBus.emitNotebookSelected(o)}deleteNotebook(o){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(K({id:o}))}closeNotebook(){this.selectedNotebook=null}toggleNotebookOptions(o){this.openNotebookOptionsId=this.openNotebookOptionsId===o?null:o}startEditingNotebook(o){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(o)}handleNoteOptionSelected(o,e){switch(o){case"addToNotebook":this.openAddToNotebookModal(e);break;case"delete":this.deleteNote(e.id);break}}openAddToNotebookModal(o){this.notebooks$.subscribe(e=>{let r=e.map(k=>k.name).join(", "),t=prompt(`Enter notebook name to add note to (available: ${r}):`);if(!t)return;let n=e.find(k=>k.name.toLowerCase()===t.toLowerCase());if(!n){alert("Notebook not found!");return}this.addNoteToNotebook(o,n)}).unsubscribe()}addNoteToNotebook(o,e){if(e.notes.some(n=>n.id===o.id)){alert("Note already in this notebook");return}let r={id:o.id,title:o.title||"Untitled Note",content:o.content||"",color:o.color,pinned:o.pinned,createdAt:o.createdAt},t=T(V({},e),{notes:[...e.notes,r],updatedAt:Date.now()});this.store.dispatch(q({update:{id:t.id,changes:{notes:t.notes}}}))}trackByNotebookId(o,e){return e.id}trackByNoteId(o,e){return e.id}createNewNote(){this.eventBus.emitCreateNote()}createNewNotebook(){this.eventBus.emitCreateNotebook()}clearSearch(){this.searchTerm="",this.searchTermSubject.next("")}openNotebook(o){this.router.navigate(["/notebooks",o.id])}editNotebook(o){this.startEditingNotebook(o)}static \u0275fac=function(e){return new(e||i)(P(D),P(H),P(j))};static \u0275cmp=A({type:i,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:13,vars:20,consts:[[1,"all-view"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","content-sections",4,"ngIf"],[1,"loading-state"],[1,"bi","bi-arrow-clockwise"],[1,"empty-state"],["icon","fluent:notebook-add-20-regular",1,"empty-icon"],["icon","bi:search",1,"empty-icon"],[1,"secondary-button",3,"click"],[1,"content-sections"],["class","section",4,"ngIf"],[1,"section"],[1,"section-header"],[1,"section-title"],[1,"notebooks-grid"],["class","notebook-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notebook-card",3,"click"],[1,"notebook-header"],["icon","fluent:notebook-subsection-24-filled",1,"notebook-icon"],[1,"notebook-title"],[1,"notebook-meta"],[1,"note-count"],[1,"notebook-actions",3,"click"],["customClass","notebook-action-button","icon","fluent:edit-28-regular","title","Edit Notebook",3,"clicked"],["customClass","notebook-action-button","icon","mage:trash","title","Delete Notebook",3,"clicked"],[1,"notes-grid"],[3,"note","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","optionSelected","note"]],template:function(e,r){if(e&1&&(s(0,"div",0),u(1,oe,3,0,"div",1),a(2,"async"),u(3,ne,6,0,"div",2),a(4,"async"),a(5,"async"),a(6,"async"),u(7,ie,11,1,"div",2),a(8,"async"),a(9,"async"),a(10,"async"),u(11,pe,7,9,"div",3),a(12,"async"),c()),e&2){let t;m(),g("ngIf",d(2,4,r.isLoading$)),m(2),g("ngIf",!d(4,6,r.isLoading$)&&!d(5,8,r.hasNotes$)&&!d(6,10,r.hasNotebooks$)),m(4),g("ngIf",!d(8,12,r.isLoading$)&&r.searchTerm&&((t=d(9,14,r.filteredNotes$))==null?null:t.length)===0&&((t=d(10,16,r.filteredNotebooks$))==null?null:t.length)===0),m(4),g("ngIf",!d(12,18,r.isLoading$))}},dependencies:[F,B,I,L,J,Y],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;box-sizing:border-box}.secondary-bacgkround[_ngcontent-%COMP%]{position:absolute;background-color:red;top:0;height:50%;width:50%}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--feature-button-color);font-size:small;font-weight:500;margin-bottom:1rem}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:18px;cursor:pointer;transition:all .2s ease;position:relative}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover{border:2px solid #96b8b8;background:#edffff;box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#43868670;font-size:1.5rem;margin-bottom:.5rem}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-title[_ngcontent-%COMP%]{font-size:medium;margin:0;color:#0000009f}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-title[_ngcontent-%COMP%]{color:var(--sidebar-gradient-color3)}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-actions[_ngcontent-%COMP%]{opacity:1}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#828282c2;font-size:.875rem;margin:0}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]{display:flex;gap:0;align-items:center;opacity:0}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   .notebook-action-button[_ngcontent-%COMP%]{align-items:center;margin:0!important}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .ntbk-three-dots[_ngcontent-%COMP%]{top:14px;right:14px;background-color:transparent;padding:2px 6px;border:none;border-radius:8px;color:var(--feature-button-color);opacity:0}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .ntbk-three-dots[_ngcontent-%COMP%]:hover{color:var(--feature-button-hover-color);background-color:var(--feature-button-hover-background-color)}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;bottom:-50px;right:0;background:#fff;border:1px solid #ccc;z-index:1000;padding:0;box-shadow:0 4px 8px #0000001a;min-width:120px;display:flex;flex-direction:column;gap:2px}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;text-align:left;background:none;border:none;border-radius:0;padding:4px 12px;width:100%;cursor:pointer}.section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.section[_ngcontent-%COMP%]   .notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;padding:0;margin:0}"]})};export{ee as AllView};
