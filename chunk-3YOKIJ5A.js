import{q as E,r as O,s as T}from"./chunk-USYNKWT3.js";import{n as P}from"./chunk-Z2ET6X4S.js";import{i as N,j as x,k as M,o as S}from"./chunk-XVQNOWHH.js";import{Bb as C,Eb as g,Fb as f,La as h,Lb as w,Na as v,Oa as p,Ta as u,Za as k,cb as b,eb as l,qb as d,rb as n,sb as r,tb as m,vb as c,wb as _}from"./chunk-Q7C4TOEW.js";function D(a,t){if(a&1&&(n(0,"div",15),m(1,"img",16),r()),a&2){let o=t.$implicit;p(),d("src",o,h)}}function A(a,t){if(a&1&&(n(0,"div",13),b(1,D,2,1,"div",14),r()),a&2){let o=_();p(),d("ngForOf",o.note.images)}}var y=class a{constructor(t,o){this.store=t;this.eventBus=o;this.notebooks$=this.store.select(E)}note;open=new l;delete=new l;togglePin=new l;optionSelected=new l;addToNotebook=new l;showCheckboxes=new l;addCheckboxes=new l;notebooks$;dropdownVisible=!1;onDocumentClick(t){this.dropdownVisible=!1}onOpen(){this.open.emit(this.note)}onDelete(t){t.stopPropagation(),this.delete.emit(this.note.id)}onTogglePin(t){this.togglePin.emit({note:this.note,event:t})}openAddToNotebookModal(t){this.eventBus.triggerAddToNotebookModal(t)}toggleDropdown(t){t.preventDefault(),t.stopPropagation(),console.log("Dropdown toggled"),this.dropdownVisible=!this.dropdownVisible}onOptionSelected(t){switch(t){case"addToNotebook":this.optionSelected.emit("addToNotebook"),this.addToNotebook.emit(this.note);break;case"delete":this.onDelete({stopPropagation:()=>{}});break;case"showCheckboxes":this.showCheckboxes.emit(this.note);break;case"addCheckboxes":this.addCheckboxes.emit(this.note);break}}addCheckboxesToContent(t){return t.split(`
`).map(i=>i.trim()?`\u2610 ${i}`:i).join(`
`)}toggleCheckbox(t,o){let e=t.split(`
`);return e[o]&&(e[o].startsWith("\u2610")?e[o]=e[o].replace("\u2610","\u2611"):e[o].startsWith("\u2611")&&(e[o]=e[o].replace("\u2611","\u2610"))),e.join(`
`)}static \u0275fac=function(o){return new(o||a)(u(P),u(O))};static \u0275cmp=k({type:a,selectors:[["app-note"]],hostBindings:function(o,e){o&1&&c("click",function(s){return e.onDocumentClick(s)},v)},inputs:{note:"note"},outputs:{open:"open",delete:"delete",togglePin:"togglePin",optionSelected:"optionSelected",addToNotebook:"addToNotebook",showCheckboxes:"showCheckboxes",addCheckboxes:"addCheckboxes"},decls:17,vars:8,consts:[[3,"click"],[1,"note-title"],["class","image-preview",4,"ngIf"],[1,"buttons-container",3,"click"],[1,"pin-icon"],[1,"bi",3,"click","ngClass","title"],[1,"left-buttons"],["customClass","image-button","icon","mage:image","title","Upload image"],["customClass","add-to-notebook-button","icon","fluent:notebook-arrow-curve-down-20-regular","title","Add to notebook",3,"clicked"],["customClass","reminder-button","icon","carbon:reminder","title","Add reminder"],["customClass","add-checkboxes-button","icon","tabler:checkbox","title","Add checkboxes",3,"clicked"],["customClass","archive-button","icon","mage:archive","title","Archive note"],["customClass","delete-note-button","icon","mage:trash","title","Delete note",3,"clicked"],[1,"image-preview"],["class","image-wrapper",4,"ngFor","ngForOf"],[1,"image-wrapper"],[1,"preview-thumbnail",3,"src"]],template:function(o,e){o&1&&(n(0,"li",0),c("click",function(){return e.onOpen()}),n(1,"div")(2,"h3",1),g(3),r(),n(4,"p"),g(5),r(),b(6,A,2,1,"div",2),r(),n(7,"div",3),c("click",function(s){return s.stopPropagation()}),n(8,"div",4)(9,"i",5),c("click",function(s){return e.onTogglePin(s)}),r()(),n(10,"div",6),m(11,"app-button-feature",7),n(12,"app-button-feature",8),c("clicked",function(){return e.openAddToNotebookModal(e.note)}),r(),m(13,"app-button-feature",9),n(14,"app-button-feature",10),c("clicked",function(s){return e.onDelete(s)}),r(),m(15,"app-button-feature",11),n(16,"app-button-feature",12),c("clicked",function(s){return e.onDelete(s)}),r()()()()),o&2&&(C("background-color",e.note.color||"#ffffff"),p(3),f(e.note.title),p(2),f(e.note.content),p(),d("ngIf",e.note.images==null?null:e.note.images.length),p(3),d("title",w(e.note.pinned?"Unpin":"Pin"))("ngClass",e.note.pinned?"bi-pin-fill":"bi-pin"))},dependencies:[S,N,x,M,T],styles:["li[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:6px;min-height:280px;height:auto;padding:1rem;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;cursor:default;overflow:visible;transition:all .2s ease;outline:.5px solid rgba(150,150,150,.3)}li[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}p[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:18pt;color:#343434;display:-webkit-box;-webkit-line-clamp:7;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-height:220px;white-space:pre-wrap}.image-preview[_ngcontent-%COMP%]{display:flex;gap:6px;margin-top:.5rem}.image-preview[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .preview-thumbnail[_ngcontent-%COMP%]{height:60px;width:auto;object-fit:cover;border-radius:4px}.buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:1rem;opacity:0;pointer-events:auto;transition:opacity .2s ease-in-out;width:100%}li[_ngcontent-%COMP%]:hover   .buttons-container[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.left-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.pin-icon[_ngcontent-%COMP%]{position:absolute;top:14px;right:14px;padding:4px 6px 2px;cursor:pointer;font-size:1.2rem;color:var(--feature-button-color);z-index:10}.pin-icon[_ngcontent-%COMP%]:hover{color:var(--feature-button-hover-color);background-color:var(--feature-button-hover-background-color);border-radius:8px}"]})};export{y as a};
