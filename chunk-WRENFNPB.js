import{c as H,d as K,e as y}from"./chunk-Q4XPWOWJ.js";import{a as G}from"./chunk-EEBGN5MF.js";import{F,O as j,R as D,S as z,U as R,V as U,Y as q,Z as W,_ as Y,c as A,d as E,f as B,h as I,o as L}from"./chunk-KMJ7MDTT.js";import{Cb as v,Db as M,Fb as $,H as C,M as O,Nb as p,Oa as d,Ob as _,Ta as x,Za as T,a as S,b as V,cb as f,eb as P,ob as m,pa as g,pb as s,qa as b,qb as c,rb as u,sb as w,tb as N,ub as l,w as k,x as h}from"./chunk-B7TIYGNX.js";function X(r,t){r&1&&(s(0,"div",5),u(1,"i",6),v(2," Loading your content... "),c())}function Z(r,t){r&1&&(s(0,"div",7)(1,"h2"),v(2,"Welcome to Noteboard!"),c(),s(3,"p"),v(4,"Start by creating your first note or notebook."),c()())}function ee(r,t){if(r&1&&(s(0,"div",7)(1,"h3"),u(2,"iconify-icon",8),v(3," No results found "),c(),s(4,"p"),v(5,'No notes or notebooks match "'),s(6,"strong"),v(7),c(),v(8,'"'),c()()),r&2){let e=l();d(7),M(e.searchTerm)}}function te(r,t){if(r&1){let e=w();s(0,"div",17),N("click",function(){let o=g(e).$implicit,n=l(4);return b(n.openNotebook(o))}),s(1,"div",18),u(2,"iconify-icon",19),s(3,"h3",20),v(4),c()(),s(5,"div",21)(6,"span",22),v(7),c(),s(8,"div",23),N("click",function(o){return g(e),b(o.stopPropagation())}),s(9,"app-button-feature",24),N("clicked",function(){let o=g(e).$implicit,n=l(4);return b(n.editNotebook(o))}),c(),s(10,"app-button-feature",25),N("clicked",function(){let o=g(e).$implicit,n=l(4);return b(n.deleteNotebook(o.id))}),c()()()()}if(r&2){let e=t.$implicit;d(4),M(e.name),d(3),$("",e.notes.length," ",e.notes.length<=1?"note":"notes ")}}function oe(r,t){if(r&1&&(s(0,"div",12)(1,"div",13)(2,"h2",14),v(3,"NOTEBOOKS"),c()(),s(4,"div",15),f(5,te,11,3,"div",16),p(6,"async"),c()()),r&2){let e=l(3);d(5),m("ngForOf",_(6,2,e.filteredNotebooks$))("ngForTrackBy",e.trackByNotebookId)}}function ne(r,t){if(r&1){let e=w();s(0,"app-note",28),N("open",function(o){g(e);let n=l(4);return b(n.openNoteModal(o))})("delete",function(o){g(e);let n=l(4);return b(n.deleteNote(o))})("togglePin",function(o){g(e);let n=l(4);return b(n.togglePin(o.note,o.event))})("optionSelected",function(o){let n=g(e).$implicit,a=l(4);return b(a.handleNoteOptionSelected(o,n))}),c()}if(r&2){let e=t.$implicit;m("note",e)}}function ie(r,t){if(r&1&&(s(0,"div",12)(1,"div",13)(2,"h2",14),v(3,"PINNED"),c()(),s(4,"div",26),f(5,ne,1,1,"app-note",27),p(6,"async"),c()()),r&2){let e=l(3);d(5),m("ngForOf",_(6,2,e.pinnedNotes$))("ngForTrackBy",e.trackByNoteId)}}function re(r,t){if(r&1){let e=w();s(0,"app-note",28),N("open",function(o){g(e);let n=l(4);return b(n.openNoteModal(o))})("delete",function(o){g(e);let n=l(4);return b(n.deleteNote(o))})("togglePin",function(o){g(e);let n=l(4);return b(n.togglePin(o.note,o.event))})("optionSelected",function(o){let n=g(e).$implicit,a=l(4);return b(a.handleNoteOptionSelected(o,n))}),c()}if(r&2){let e=t.$implicit;m("note",e)}}function se(r,t){if(r&1&&(s(0,"div",12)(1,"div",13)(2,"h2",14),v(3,"NOTES"),c()(),s(4,"div",26),f(5,re,1,1,"app-note",27),p(6,"async"),c()()),r&2){let e=l(3);d(5),m("ngForOf",_(6,2,e.filteredNotes$))("ngForTrackBy",e.trackByNoteId)}}function ce(r,t){if(r&1&&(s(0,"div"),f(1,oe,7,4,"div",11)(2,ie,7,4,"div",11),p(3,"async"),f(4,se,7,4,"div",11),p(5,"async"),c()),r&2){let e=t.ngIf,i=l(2);d(),m("ngIf",e.length>0&&!i.selectedNotebook),d(),m("ngIf",_(3,3,i.hasPins$)&&!i.selectedNotebook),d(2),m("ngIf",_(5,5,i.hasUnpinnedNotes$)&&!i.selectedNotebook)}}function le(r,t){if(r&1&&(s(0,"div",9),f(1,ce,6,7,"div",10),p(2,"async"),c()),r&2){let e=l();d(),m("ngIf",_(2,1,e.filteredNotebooks$))}}var J=class r{constructor(t,e,i){this.store=t;this.eventBus=e;this.router=i;this.isLoading$=this.store.select(K),this.allNotes$=this.store.select(H),this.notebooks$=this.store.select(q);let o=this.store.select(y);this.filteredNotes$=h([this.allNotes$,o.pipe(C(300),O())]).pipe(k(([n,a])=>this.filterNotes(n.filter(Q=>!Q.pinned),a))),this.pinnedNotes$=h([this.allNotes$.pipe(k(n=>n.filter(a=>a.pinned))),o.pipe(C(300),O())]).pipe(k(([n,a])=>this.filterNotes(n,a))),this.filteredNotebooks$=h([this.notebooks$,o.pipe(C(300),O())]).pipe(k(([n,a])=>this.filterNotebooks(n,a))),this.hasNotes$=this.allNotes$.pipe(k(n=>n.length>0)),this.hasNotebooks$=this.notebooks$.pipe(k(n=>n.length>0)),this.hasPins$=this.pinnedNotes$.pipe(k(n=>n.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(k(n=>n.length>0)),this.store.select(y).subscribe(n=>{this.searchTerm=n})}noteSelected=new P;notebookSelected=new P;editNotebookRequested=new P;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;ngOnInit(){}filterNotes(t,e){let i=t;if(e){let o=e.toLowerCase();i=t.filter(n=>n.title.toLowerCase().includes(o)||n.content.toLowerCase().includes(o))}try{return[...i].sort((o,n)=>(n.createdAt||0)-(o.createdAt||0))}catch(o){return console.error("Sorting failed:",o,i),i}}openNoteModal(t){this.eventBus.emitNoteSelected(t)}deleteNote(t){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(j({id:t}))}togglePin(t,e){e.stopPropagation(),this.store.dispatch(D({id:t.id}))}filterNotebooks(t,e){if(!e)return t;let i=e.toLowerCase();return t.filter(o=>o.name.toLowerCase().includes(i))}selectNotebook(t){this.selectedNotebook=t,this.eventBus.emitNotebookSelected(t)}deleteNotebook(t){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(U({id:t}))}closeNotebook(){this.selectedNotebook=null}toggleNotebookOptions(t){this.openNotebookOptionsId=this.openNotebookOptionsId===t?null:t}startEditingNotebook(t){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(t)}handleNoteOptionSelected(t,e){switch(t){case"addToNotebook":this.openAddToNotebookModal(e);break;case"delete":this.deleteNote(e.id);break}}openAddToNotebookModal(t){this.notebooks$.subscribe(e=>{let i=e.map(a=>a.name).join(", "),o=prompt(`Enter notebook name to add note to (available: ${i}):`);if(!o)return;let n=e.find(a=>a.name.toLowerCase()===o.toLowerCase());if(!n){alert("Notebook not found!");return}this.addNoteToNotebook(t,n)}).unsubscribe()}addNoteToNotebook(t,e){if(e.notes.some(n=>n.id===t.id)){alert("Note already in this notebook");return}let i={id:t.id,title:t.title||"Untitled Note",content:t.content||"",color:t.color,pinned:t.pinned,createdAt:t.createdAt},o=V(S({},e),{notes:[...e.notes,i],updatedAt:Date.now()});this.store.dispatch(R({update:{id:o.id,changes:{notes:o.notes}}}))}trackByNotebookId(t,e){return e.id}trackByNoteId(t,e){return e.id}createNewNote(){this.eventBus.emitCreateNote()}createNewNotebook(){this.eventBus.emitCreateNotebook()}clearSearch(){this.searchTerm="",this.store.dispatch(z({term:""}))}openNotebook(t){this.router.navigate(["/notebooks",t.id])}editNotebook(t){this.startEditingNotebook(t)}static \u0275fac=function(e){return new(e||r)(x(F),x(W),x(L))};static \u0275cmp=T({type:r,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:14,vars:20,consts:[[1,"all-view"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"content-container"],["class","content-sections",4,"ngIf"],[1,"loading-state"],[1,"bi","bi-arrow-clockwise"],[1,"empty-state"],["icon","bi:search",1,"empty-icon"],[1,"content-sections"],[4,"ngIf"],["class","section",4,"ngIf"],[1,"section"],[1,"section-header"],[1,"section-title"],[1,"notebooks-grid"],["class","notebook-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notebook-card",3,"click"],[1,"notebook-header"],["icon","fluent:notebook-subsection-24-filled",1,"notebook-icon"],[1,"notebook-title"],[1,"notebook-meta"],[1,"note-count"],[1,"notebook-actions",3,"click"],["customClass","notebook-action-button","icon","fluent:edit-28-regular","title","Edit Notebook",3,"clicked"],["customClass","notebook-action-button","icon","mage:trash","title","Delete Notebook",3,"clicked"],[1,"notes-grid"],[3,"note","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","optionSelected","note"]],template:function(e,i){if(e&1&&(s(0,"div",0),f(1,X,3,0,"div",1),p(2,"async"),f(3,Z,5,0,"div",2),p(4,"async"),p(5,"async"),p(6,"async"),f(7,ee,9,1,"div",2),p(8,"async"),p(9,"async"),p(10,"async"),u(11,"div",3),f(12,le,3,3,"div",4),p(13,"async"),c()),e&2){let o;d(),m("ngIf",_(2,4,i.isLoading$)),d(2),m("ngIf",!_(4,6,i.isLoading$)&&!_(5,8,i.hasNotes$)&&!_(6,10,i.hasNotebooks$)),d(4),m("ngIf",!_(8,12,i.isLoading$)&&i.searchTerm&&((o=_(9,14,i.filteredNotes$))==null?null:o.length)===0&&((o=_(10,16,i.filteredNotebooks$))==null?null:o.length)===0),d(5),m("ngIf",!_(13,18,i.isLoading$))}},dependencies:[I,A,E,B,G,Y],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;align-items:center;justify-content:center;box-sizing:border-box}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;height:calc(100vh - 150px);border-radius:8px;background-color:#fffffff3}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--header-search-bar-or-section-text-color);text-align:center}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:600}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--feature-button-color);font-size:small;font-weight:500;margin-bottom:1rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:1.5rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:18px;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 6px #43868626;position:relative}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover{border:2px solid #96b8b8;background:#edffff;box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#43868670;font-size:1.5rem;margin-bottom:.5rem}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-title[_ngcontent-%COMP%]{font-size:medium;margin:0;color:#000000c4}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-title[_ngcontent-%COMP%]{color:var(--sidebar-gradient-color3)}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-actions[_ngcontent-%COMP%]{opacity:1}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#828282c2;font-size:.875rem;margin:0}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]{display:flex;gap:0;align-items:center;opacity:0}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   .notebook-action-button[_ngcontent-%COMP%]{align-items:center;margin:0!important}.content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;padding:0;margin:0}"]})};export{J as AllView};
