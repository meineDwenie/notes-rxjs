import{F as R,G as A,H as q,M as Y,N as K,Q as H,T as W,U as G,V as J,i as F,j,k as L,l as z,m as U,n as D}from"./chunk-WOOP355H.js";import{Ab as $,Cb as p,Db as k,Eb as E,H as y,Ib as I,Kb as v,La as O,Lb as b,M as C,Mb as B,Oa as s,Ta as P,Y as S,Za as M,cb as m,eb as V,l as T,ob as c,pa as _,pb as r,qa as g,qb as l,rb as u,sb as N,vb as f,w as x,wb as d,x as w}from"./chunk-IAM6LOJU.js";var Q=q(J),X=A(Q,t=>t.notes),Z=A(Q,t=>t.loading);function ie(t,i){t&1&&(r(0,"div"),p(1,"Loading the notes ..."),l())}function ne(t,i){t&1&&(r(0,"div",5)(1,"p"),u(2,"i",6),p(3,"No notes yet. Add one!"),l()())}function oe(t,i){if(t&1&&(r(0,"div",5)(1,"p"),u(2,"i",7),p(3,'No notes match your search "'),r(4,"strong"),p(5),l(),p(6,'" '),l()()),t&2){let e=d();s(5),k(e.searchTerm)}}function re(t,i){if(t&1){let e=N();r(0,"div",22),f("click",function(o){return _(e),g(o.stopPropagation())}),r(1,"button",23),f("click",function(){_(e);let o=d().$implicit,a=d(2);return g(a.startEditingNotebook(o))}),p(2,"Edit"),l(),r(3,"button",23),f("click",function(){_(e);let o=d().$implicit,a=d(2);return g(a.deleteNotebook(o.id))}),p(4,"Delete"),l()()}}function le(t,i){if(t&1){let e=N();r(0,"div",12)(1,"div",13)(2,"div",14),f("click",function(){let o=_(e).$implicit,a=d(2);return g(a.selectNotebook(o))}),u(3,"iconify-icon",15),r(4,"h3"),p(5),l()(),r(6,"button",16),f("click",function(o){let a=_(e).$implicit;return d(2).toggleNotebookOptions(a.id),g(o.stopPropagation())}),u(7,"i",17),l(),m(8,re,5,0,"div",18),r(9,"div",19)(10,"div",20),p(11),l(),r(12,"div",21),p(13),v(14,"date"),l()()()()}if(t&2){let e=i.$implicit,n=d(2);s(5),k(e.name),s(3),c("ngIf",n.openNotebookOptionsId===e.id),s(3),E("",e.notes.length," notes"),s(2),E(" ",B(14,4,e.createdAt,"MM/dd/yyyy")," ")}}function se(t,i){if(t&1&&(r(0,"div",8)(1,"h3",9),p(2,"MY NOTEBOOKS"),l(),r(3,"div",10),m(4,le,15,7,"div",11),v(5,"async"),l()()),t&2){let e=d();s(4),c("ngForOf",b(5,1,e.notebooks$))}}function ae(t,i){if(t&1&&u(0,"img",34),t&2){let e=i.$implicit;c("src",e,O)}}function ce(t,i){if(t&1&&(r(0,"div",32),m(1,ae,1,1,"img",33),l()),t&2){let e=d().$implicit;s(),c("ngForOf",e.images)}}function de(t,i){if(t&1){let e=N();r(0,"div",26),f("click",function(){let o=_(e).$implicit,a=d(2);return g(a.openNoteModal(o))}),r(1,"div",27),f("click",function(o){let a=_(e).$implicit,h=d(2);return g(h.togglePin(a,o))}),u(2,"i",28),l(),r(3,"h3",29),p(4),l(),r(5,"div",30),p(6),l(),m(7,ce,2,1,"div",31),l()}if(t&2){let e=i.$implicit;$("background-color",e.color||"#ffffff"),s(2),c("ngClass",e.pinned?"bi-pin-fill":"bi-pin"),s(2),k(e.title),s(2),k(e.content),s(),c("ngIf",e.images==null?null:e.images.length)}}function pe(t,i){if(t&1&&(r(0,"div",8)(1,"h3",9),p(2),l(),r(3,"div",24),m(4,de,8,6,"div",25),l()()),t&2){let e=d();s(2),E('NOTES IN "',e.selectedNotebook.name,'"'),s(2),c("ngForOf",e.selectedNotebook.notes)}}function me(t,i){if(t&1&&(r(0,"div",43),u(1,"img",44),l()),t&2){let e=i.$implicit;s(),c("src",e,O)}}function _e(t,i){if(t&1&&(r(0,"div",41),m(1,me,2,1,"div",42),l()),t&2){let e=d().$implicit;s(),c("ngForOf",e.images)}}function ge(t,i){if(t&1){let e=N();r(0,"li",23),f("click",function(){let o=_(e).$implicit,a=d(2);return g(a.openNoteModal(o))}),r(1,"div")(2,"h3",29),p(3),l(),r(4,"p"),p(5),l(),m(6,_e,2,1,"div",36),l(),r(7,"div",37),f("click",function(o){return _(e),g(o.stopPropagation())}),r(8,"button",38),f("click",function(){let o=_(e).$implicit,a=d(2);return g(a.deleteNote(o.id))}),u(9,"i",39),p(10," Delete "),l(),r(11,"i",40),f("click",function(o){let a=_(e).$implicit,h=d(2);return g(h.togglePin(a,o))}),l()()()}if(t&2){let e=i.$implicit;$("background-color",e.color||"#ffffff"),s(3),k(e.title),s(2),k(e.content),s(),c("ngIf",e.images==null?null:e.images.length)}}function fe(t,i){if(t&1&&(r(0,"div",8)(1,"h3",9),p(2,"MY PINS"),l(),r(3,"ul"),m(4,ge,12,5,"li",35),v(5,"async"),l()()),t&2){let e=d();s(4),c("ngForOf",b(5,1,e.pinnedNotes$))}}function ve(t,i){if(t&1&&(r(0,"div",43),u(1,"img",44),l()),t&2){let e=i.$implicit;s(),c("src",e,O)}}function be(t,i){if(t&1&&(r(0,"div",41),m(1,ve,2,1,"div",42),l()),t&2){let e=d().$implicit;s(),c("ngForOf",e.images)}}function ue(t,i){if(t&1){let e=N();r(0,"li",23),f("click",function(){let o=_(e).$implicit,a=d(2);return g(a.openNoteModal(o))}),r(1,"div")(2,"h3",29),p(3),l(),r(4,"p"),p(5),l(),m(6,be,2,1,"div",36),l(),r(7,"div",37),f("click",function(o){return _(e),g(o.stopPropagation())}),r(8,"button",38),f("click",function(){let o=_(e).$implicit,a=d(2);return g(a.deleteNote(o.id))}),u(9,"i",39),p(10," Delete "),l(),r(11,"div",45)(12,"i",46),f("click",function(o){let a=_(e).$implicit,h=d(2);return g(h.togglePin(a,o))}),l()()()()}if(t&2){let e=i.$implicit;$("background-color",e.color||"#ffffff"),s(3),k(e.title),s(2),k(e.content),s(),c("ngIf",e.images==null?null:e.images.length),s(6),c("title",I(e.pinned?"Unpin":"Pin"))("ngClass",e.pinned?"bi-pin-fill":"bi-pin")}}function xe(t,i){if(t&1&&(r(0,"div",8)(1,"h3",9),p(2,"RECENT NOTES"),l(),r(3,"ul"),m(4,ue,13,8,"li",35),v(5,"async"),l()()),t&2){let e=d();s(4),c("ngForOf",b(5,1,e.filteredNotes$))}}var ee=class t{constructor(i,e){this.store=i;this.eventBus=e;this.isLoading$=this.store.select(Z),this.allNotes$=this.store.select(X),this.notebooks$=this.store.select(W),this.filteredNotes$=w([this.allNotes$,this.searchTermSubject.asObservable().pipe(y(300),C(),S(""))]).pipe(x(([n,o])=>this.filterNotes(n.filter(a=>!a.pinned),o))),this.pinnedNotes$=w([this.allNotes$.pipe(x(n=>n.filter(o=>o.pinned))),this.searchTermSubject.asObservable().pipe(y(300),C(),S(""))]).pipe(x(([n,o])=>this.filterNotes(n,o))),this.filteredNotebooks$=w([this.notebooks$,this.searchTermSubject.asObservable().pipe(y(300),C(),S(""))]).pipe(x(([n,o])=>this.filterNotebooks(n,o))),this.hasNotes$=this.allNotes$.pipe(x(n=>n.length>0)),this.hasNotebooks$=this.notebooks$.pipe(x(n=>n.length>0)),this.hasPins$=this.pinnedNotes$.pipe(x(n=>n.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(x(n=>n.length>0))}noteSelected=new V;notebookSelected=new V;editNotebookRequested=new V;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;searchTermSubject=new T("");ngOnInit(){}onSearchTermChange(i){this.searchTerm=i,this.searchTermSubject.next(i)}filterNotes(i,e){let n=i;if(e){let o=e.toLowerCase();n=i.filter(a=>a.title.toLowerCase().includes(o)||a.content.toLowerCase().includes(o))}try{return[...n].sort((o,a)=>(a.createdAt||0)-(o.createdAt||0))}catch(o){return console.error("Sorting failed:",o,n),n}}openNoteModal(i){this.eventBus.emitNoteSelected(i)}deleteNote(i){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(Y({id:i}))}togglePin(i,e){e.stopPropagation(),this.store.dispatch(K({id:i.id}))}filterNotebooks(i,e){if(!e)return i;let n=e.toLowerCase();return i.filter(o=>o.name.toLowerCase().includes(n))}selectNotebook(i){this.selectedNotebook=i,this.eventBus.emitNotebookSelected(i)}editNotebook(i){console.log("Edit notebook:",i)}deleteNotebook(i){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(H({id:i}))}toggleNotebookOptions(i){this.openNotebookOptionsId=this.openNotebookOptionsId===i?null:i}startEditingNotebook(i){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(i)}static \u0275fac=function(e){return new(e||t)(P(R),P(G))};static \u0275cmp=M({type:t,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:19,vars:27,consts:[[1,"all-view"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"secondary-background"],["class","section",4,"ngIf"],[1,"empty-state"],[1,"bi","bi-emoji-frown","me-2"],[1,"bi","bi-search","me-2"],[1,"section"],[1,"section-title"],["id","notebooksContainer",1,"notebooks-row"],["class","notebook-item",4,"ngFor","ngForOf"],[1,"notebook-item"],[1,"notebook-box"],[1,"notebook-header",3,"click"],["icon","emojione-v1:notebook"],[1,"ntbk-three-dots",3,"click"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu",3,"click",4,"ngIf"],[1,"notebook-meta"],[1,"ntbk-note-count"],[1,"ntbk-date-added"],[1,"dropdown-menu",3,"click"],[3,"click"],[1,"notes-grid"],["class","note-item",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"note-item",3,"click"],[1,"pin-icon",3,"click"],[1,"bi",3,"ngClass"],[1,"note-title"],[1,"note-content"],["class","note-images",4,"ngIf"],[1,"note-images"],["alt","Note image","class","note-image",3,"src",4,"ngFor","ngForOf"],["alt","Note image",1,"note-image",3,"src"],[3,"backgroundColor","click",4,"ngFor","ngForOf"],["class","image-preview",4,"ngIf"],[1,"buttons-container",3,"click"],["title","Delete",3,"click"],[1,"bi","bi-trash-fill"],["title","Unpin",1,"bi","bi-pin-fill","pin-icon",3,"click"],[1,"image-preview"],["class","image-wrapper",4,"ngFor","ngForOf"],[1,"image-wrapper"],[1,"preview-thumbnail",3,"src"],[1,"pin-icon"],[1,"bi",3,"click","ngClass","title"]],template:function(e,n){if(e&1&&(r(0,"div",0),m(1,ie,2,0,"div",1),v(2,"async"),m(3,ne,4,0,"div",2),v(4,"async"),v(5,"async"),m(6,oe,7,1,"div",2),v(7,"async"),v(8,"async"),v(9,"async"),v(10,"async"),u(11,"div",3),m(12,se,6,3,"div",4),v(13,"async"),m(14,pe,5,2,"div",4)(15,fe,6,3,"div",4),v(16,"async"),m(17,xe,6,3,"div",4),v(18,"async"),l()),e&2){let o;s(),c("ngIf",b(2,7,n.isLoading$)),s(2),c("ngIf",!b(4,9,n.isLoading$)&&!b(5,11,n.hasNotes$)),s(3),c("ngIf",!b(7,13,n.isLoading$)&&((o=b(8,15,n.filteredNotes$))==null?null:o.length)===0&&b(9,17,n.pinnedNotes$)&&((o=b(10,19,n.filteredNotebooks$))==null?null:o.length)===0&&n.searchTerm),s(6),c("ngIf",b(13,21,n.hasNotebooks$)),s(2),c("ngIf",n.selectedNotebook),s(),c("ngIf",b(16,23,n.hasPins$)),s(2),c("ngIf",b(18,25,n.hasUnpinnedNotes$))}},dependencies:[D,F,j,L,z,U],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;box-sizing:border-box}.secondary-bacgkround[_ngcontent-%COMP%]{position:absolute;background-color:red;top:0;height:50%;width:50%}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--notes-content-txt-color);margin-bottom:1rem}.notebooks-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;margin-bottom:1.5rem}.notebook-item[_ngcontent-%COMP%]{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:1.5rem;cursor:pointer;transition:all .2s ease;position:relative}.notebook-item[_ngcontent-%COMP%]:hover{border-color:var(--header-action-btn-secondary);box-shadow:0 8px 25px #667eea26}.notebook-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}iconify-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#fff;font-size:2rem;margin-bottom:1rem}.ntbk-three-dots[_ngcontent-%COMP%]{position:absolute;top:14px;right:14px;background-color:transparent;padding:2px 6px;border:none;border-radius:8px;color:var(--feature-button-color);opacity:0}.ntbk-three-dots[_ngcontent-%COMP%]:hover{background-color:var(--feature-button-hover-color);color:#000}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:80%;right:0;background:#fff;border:1px solid #ccc;z-index:1000;padding:0;box-shadow:0 4px 8px #0000001a;min-width:120px;display:flex;flex-direction:column;gap:2px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;text-align:left;background:none;border:none;border-radius:0;padding:4px 12px;width:100%;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#6b7280;font-size:.875rem;margin:0}.notebook-item[_ngcontent-%COMP%]:hover   .ntbk-three-dots[_ngcontent-%COMP%]{opacity:1}.notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;padding:0;margin:0;list-style-type:none}li[_ngcontent-%COMP%]{position:relative;flex:1 1 calc(20% - 1rem);max-width:calc(25% - 1rem);min-height:120px;height:auto;padding:1rem;border-radius:6px;margin-bottom:0;background-color:#fff;outline:.5px solid rgba(150,150,150,.3);box-shadow:0 1px 4px #00000014;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;cursor:default;overflow:hidden;transition:all .2s ease}li[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a;transform:translateY(-2px)}.note-title[_ngcontent-%COMP%]{font-size:18px}p[_ngcontent-%COMP%]{margin:.6rem 0 0;font-size:16px;color:#141414;display:-webkit-box;-webkit-line-clamp:10;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-height:220px;white-space:pre-wrap}.pin-icon[_ngcontent-%COMP%]{position:absolute;top:14px;right:14px;padding:.5rem;cursor:pointer;font-size:1.2rem;color:var(--feature-button-color);z-index:10}.pin-icon[_ngcontent-%COMP%]:hover{color:#000;background-color:var(--feature-button-hover-color);border-radius:8px}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;justify-content:flex-end;margin:1rem 0 0;opacity:0;pointer-events:none;transition:opacity .2s ease-in-out}li[_ngcontent-%COMP%]:hover   .buttons-container[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:0;padding:.4rem .8rem;border:none;border-radius:8px;cursor:pointer;font-size:.9rem;color:var(--feature-button-color);background-color:transparent;font-family:Reddit Sans,sans-serif}li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--feature-button-hover-color)}"]})};export{ee as AllView};
