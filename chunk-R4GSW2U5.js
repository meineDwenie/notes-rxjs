import{a as Q}from"./chunk-SAQTCLJY.js";import{D as z,M as H,P as U,R as G,S as q,V as J,X as K,c as A,d as h,e as F,f as j,h as x,l as $,n as L}from"./chunk-LBENQBDS.js";import{Bb as M,Cb as l,Db as N,E as T,Fb as P,Lb as S,Mb as R,Na as _,Nb as B,Sa as f,Ua as V,Ya as v,_ as w,bb as b,db as y,k as I,nb as d,ob as r,pa as p,pb as s,qa as m,qb as k,ra as O,rb as g,ub as u,vb as c,w as E,x as D}from"./chunk-WAOKH6ES.js";function te(n,t){if(n&1&&k(0,"iconify-icon",3),n&2){let e=c();M(e.icon),d("icon",e.icon)}}function oe(n,t){if(n&1&&(r(0,"p"),l(1),s()),n&2){let e=c();_(),N(e.label)}}var C=class n{constructor(t,e){this.vcr=t;this.injector=e}label;icon;disabled=!1;customClass="";options=[];clicked=new y;optionSelected=new y;isOpen=!1;dropdownRef;onClick(t){this.disabled||this.clicked.emit(t)}toggleMenu(t){if(t.stopPropagation(),this.dropdownRef){this.dropdownRef.destroy(),this.dropdownRef=void 0;return}let e=t.target.getBoundingClientRect(),o={x:e.left,y:e.bottom+4};this.dropdownRef=this.vcr.createComponent(K,{injector:this.injector}),this.dropdownRef.instance.options=this.options,this.dropdownRef.instance.position=o,this.dropdownRef.instance.optionSelected.subscribe(i=>{this.optionSelected.emit(i),this.dropdownRef?.destroy(),this.dropdownRef=void 0})}onSelect(t,e){e.stopPropagation(),this.optionSelected.emit(t),this.isOpen=!1}closeMenu(){this.isOpen=!1}static \u0275fac=function(e){return new(e||n)(f(V),f(O))};static \u0275cmp=v({type:n,selectors:[["app-button-main"]],inputs:{label:"label",icon:"icon",disabled:"disabled",customClass:"customClass",options:"options"},outputs:{clicked:"clicked",optionSelected:"optionSelected"},decls:3,vars:5,consts:[["type","button",3,"click","disabled"],["aria-hidden","true",3,"icon","class",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",3,"icon"]],template:function(e,o){e&1&&(r(0,"button",0),u("click",function(a){return o.options.length?o.toggleMenu(a):o.onClick(a)}),b(1,te,1,3,"iconify-icon",1)(2,oe,2,1,"p",2),s()),e&2&&(M(o.customClass),d("disabled",o.disabled),_(),d("ngIf",o.icon),_(),d("ngIf",o.label))},dependencies:[x,h],styles:["button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;gap:.4em;padding:.8rem 1.2rem;margin:1rem 0;font-size:1rem;border-radius:8px;border:none;cursor:pointer;background-color:#98aeae;color:#fff;box-sizing:border-box;box-shadow:0 2px 8px #0000004d}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){color:var(--feature-button-color-hover);background-color:var(--sidebar-gradient-color3)}button[_ngcontent-%COMP%]:hover:not(:disabled)   iconify-icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:hover:not(:disabled)   p[_ngcontent-%COMP%]{color:#fff}label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#fff;font-size:16px;padding:0;margin:0}"]})};function ie(n,t){if(n&1){let e=g();r(0,"div",16),k(1,"iconify-icon",17),r(2,"h3"),l(3,"This notebook is empty"),s(),r(4,"p"),l(5,"Add some notes to get started"),s(),r(6,"app-button-main",18),u("clicked",function(){p(e);let i=c(2);return m(i.addNoteToNotebook())}),s()()}}function ne(n,t){if(n&1){let e=g();r(0,"app-note",23),u("open",function(i){p(e);let a=c(3);return m(a.openNote(i))})("delete",function(i){p(e);let a=c(3);return m(a.removeNoteFromNotebook(i))})("togglePin",function(i){p(e);let a=c(3);return m(a.togglePin(i.note,i.event))})("optionSelected",function(i){let a=p(e).$implicit,X=c(3);return m(X.handleNoteOption(i,a))}),s()}if(n&2){let e=t.$implicit;d("note",e)("showNotebook",!1)}}function re(n,t){if(n&1){let e=g();r(0,"div",19)(1,"div",20)(2,"h2"),l(3,"Notes in this notebook"),s(),r(4,"app-button-main",18),u("clicked",function(){p(e);let i=c(2);return m(i.addNoteToNotebook())}),s()(),r(5,"div",21),b(6,ne,1,2,"app-note",22),s()()}if(n&2){let e=c().ngIf,o=c();_(6),d("ngForOf",e.notes)("ngForTrackBy",o.trackByNoteId)}}function se(n,t){if(n&1){let e=g();r(0,"div",2)(1,"div",3)(2,"button",4),u("click",function(){p(e);let i=c();return m(i.goBack())}),k(3,"iconify-icon",5),l(4," Back to Notebooks "),s(),r(5,"div",6)(6,"h1",7),l(7),s(),r(8,"p",8),l(9),S(10,"date"),s()(),r(11,"div",9)(12,"button",10),u("click",function(){let i=p(e).ngIf,a=c();return m(a.editNotebook(i))}),k(13,"iconify-icon",11),l(14," Edit "),s(),r(15,"button",12),u("click",function(){let i=p(e).ngIf,a=c();return m(a.deleteNotebook(i))}),k(16,"iconify-icon",13),l(17," Delete "),s()()(),b(18,ie,7,0,"div",14)(19,re,7,2,"div",15),s()}if(n&2){let e=t.ngIf;_(7),N(e.name),_(2),P(" ",e.notes.length," notes \u2022 Created ",B(10,5,e.createdAt,"mediumDate")," "),_(9),d("ngIf",e.notes.length===0),_(),d("ngIf",e.notes.length>0)}}function ce(n,t){if(n&1){let e=g();r(0,"div",24)(1,"h2"),l(2,"Notebook not found"),s(),r(3,"p"),l(4,"The notebook you're looking for doesn't exist."),s(),r(5,"button",25),u("click",function(){p(e);let i=c();return m(i.goBack())}),l(6,"Go back"),s()()}}var W=class n{constructor(t,e,o){this.route=t;this.router=e;this.store=o}notebook$;notFound=!1;destroy$=new I;ngOnInit(){this.notebook$=D([this.route.params,this.store.select(J)]).pipe(E(([t,e])=>{let o=e.find(i=>i.id===t.id);return!o&&e.length>0&&(this.notFound=!0),o}),w(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}trackByNoteId(t,e){return e.id}goBack(){this.router.navigate(["/notebooks"])}editNotebook(t){}deleteNotebook(t){confirm(`Are you sure you want to delete "${t.name}"?`)&&(this.store.dispatch(q({id:t.id})),this.goBack())}addNoteToNotebook(){}openNote(t){}removeNoteFromNotebook(t){this.notebook$.pipe(T(e=>!!e),w(this.destroy$)).subscribe(e=>{if(e){let o=e.notes.filter(i=>i.id!==t);this.store.dispatch(G({update:{id:e.id,changes:{notes:o}}}))}})}togglePin(t,e){e.stopPropagation(),this.store.dispatch(U({id:t.id}))}handleNoteOption(t,e){switch(t){case"removeFromNotebook":this.removeNoteFromNotebook(e.id);break;case"delete":confirm("Are you sure you want to delete this note?")&&this.store.dispatch(H({id:e.id}));break}}static \u0275fac=function(e){return new(e||n)(f($),f(L),f(z))};static \u0275cmp=v({type:n,selectors:[["app-notebook-detail"]],decls:3,vars:4,consts:[["class","notebook-detail",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"notebook-detail"],[1,"notebook-header"],[1,"back-button",3,"click"],["icon","lets-icons:arrow-left"],[1,"notebook-info"],[1,"notebook-title"],[1,"notebook-meta"],[1,"notebook-actions"],[1,"edit-button",3,"click"],["icon","fluent:edit-12-regular"],[1,"delete-button",3,"click"],["icon","ph:trash"],["class","empty-state",4,"ngIf"],["class","notes-section",4,"ngIf"],[1,"empty-state"],["icon","fluent:notebook-subsection-24-regular",1,"empty-icon"],["label","Add Note",1,"add-note-button",3,"clicked"],[1,"notes-section"],[1,"section-header"],[1,"notes-grid"],[3,"note","showNotebook","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf","ngForTrackBy"],[3,"open","delete","togglePin","optionSelected","note","showNotebook"],[1,"not-found"],[3,"click"]],template:function(e,o){e&1&&(b(0,se,20,8,"div",0),S(1,"async"),b(2,ce,7,0,"div",1)),e&2&&(d("ngIf",R(1,2,o.notebook$)),_(2),d("ngIf",o.notFound))},dependencies:[x,A,h,F,j,Q,C],encapsulation:2})};export{W as NotebookDetail};
