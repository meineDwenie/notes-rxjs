<!-- View mode -->
@if (note) {
<div class="modal-view">
  <!-- Notes Title -->
  <h3 (click)="onEdit('title')" class="note-title">
    {{ note.title }}
  </h3>

  <!-- Notes content -->
  <div (click)="onEdit('content')" class="modal-scrollable-content">
    <!-- Show checkboxes if exist -->
    @if (checkboxes.length > 0) {
    <div class="checkbox-list">
      @for (cb of checkboxes; track cb.id) {
      <div class="checkbox-item" [class.completed]="cb.checked">
        <span
          class="checkbox-icon"
          (click)="toggleCheckbox(cb, $event)"
          title="Click to toggle"
        >
          {{ cb.checked ? "☑" : "☐" }}
        </span>
        <span class="checkbox-text" [class.checked]="cb.checked">{{
          cb.text
        }}</span>
      </div>
      }
    </div>
    } @else if (note.content.trim()) {
    <p>{{ note.content }}</p>
    } @else {
    <!-- Fallback for no content and no checkboxes -->
    <p class="empty-note-message">This note has no content.</p>
    }
  </div>

  <!-- Images Preview -->
  <div class="image-preview">
    @for (img of images; track $index; let i = $index) {
    <div class="image-wrapper">
      <img
        [src]="img"
        class="preview-thumbnail"
        (click)="openImage(img)"
        style="cursor: zoom-in"
      />
    </div>
    }

    <!-- Fullscreen Image Preview Overlay -->
    @if (selectedImage) {
    <div class="image-overlay" (click)="closeImage()">
      <img
        [src]="selectedImage"
        class="full-image"
        (click)="$event.stopPropagation()"
      />

      />
      <button class="close-overlay" (click)="closeImage()">&times;</button>
    </div>
    }
  </div>

  <div class="modal-footer-buttons">
    <button (click)="onEdit('content')">Edit</button>
    <button class="close-btn" (click)="onClose()">Close</button>
  </div>
</div>
}
