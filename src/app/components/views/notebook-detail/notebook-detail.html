<div class="notebook-detail" *ngIf="notebook$ | async as notebook">
  <!-- Header -->
  <div class="notebook-header">
    <button (click)="goBack()" class="back-button">
      <iconify-icon icon="lets-icons:arrow-left"></iconify-icon>
      Back to Notebooks
    </button>

    <div class="notebook-info">
      <h1 class="notebook-title">{{ notebook.name }}</h1>
      <p class="notebook-meta">
        {{ notebook.notes.length }} notes â€¢ Created {{ notebook.createdAt |
        date:'mediumDate' }}
      </p>
    </div>

    <div class="notebook-actions">
      <button (click)="editNotebook(notebook)" class="edit-button">
        <iconify-icon icon="fluent:edit-12-regular"></iconify-icon>
        Edit
      </button>
      <button (click)="deleteNotebook(notebook)" class="delete-button">
        <iconify-icon icon="ph:trash"></iconify-icon>
        Delete
      </button>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="notebook.notes.length === 0">
    <iconify-icon
      icon="fluent:notebook-subsection-24-regular"
      class="empty-icon"
    ></iconify-icon>
    <h3>This notebook is empty</h3>
    <p>Add some notes to get started</p>
    <app-button-main
      label="Add Note"
      (clicked)="addNoteToNotebook()"
      class="add-note-button"
    >
    </app-button-main>
  </div>

  <!-- Notes grid -->
  <div class="notes-section" *ngIf="notebook.notes.length > 0">
    <div class="section-header">
      <h2>Notes in this notebook</h2>
      <app-button-main
        label="Add Note"
        (clicked)="addNoteToNotebook()"
        class="add-note-button"
      >
      </app-button-main>
    </div>

    <div class="notes-grid">
      <app-note
        *ngFor="let note of notebook.notes; trackBy: trackByNoteId"
        [note]="note"
        [showNotebook]="false"
        (open)="openNote($event)"
        (delete)="removeNoteFromNotebook($event)"
        (togglePin)="togglePin($event.note, $event.event)"
        (optionSelected)="handleNoteOption($event, note)"
      >
      </app-note>
    </div>
  </div>
</div>

<div class="not-found" *ngIf="notFound">
  <h2>Notebook not found</h2>
  <p>The notebook you're looking for doesn't exist.</p>
  <button (click)="goBack()">Go back</button>
</div>
