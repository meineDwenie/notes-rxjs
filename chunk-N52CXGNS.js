import{E as H,F as ee,G as de,L as _e,M as me,N as U,O as ue,R as q,S as be,T as fe,i as ae,j as P,k as S,l as pe,m as O}from"./chunk-L3V2T6Z6.js";import{$a as re,Ab as L,Cb as y,Da as oe,Db as u,Eb as x,Fb as E,Gb as se,H as B,Kb as le,La as ne,M as D,Mb as z,Na as ie,Nb as ce,Oa as a,Ob as k,Pb as h,Ta as w,Va as F,Y as R,Za as N,a as I,b as A,cb as b,eb as f,l as te,ob as p,pa as _,pb as s,qa as m,qb as l,ra as j,rb as g,sb as X,tb as Z,ub as C,vb as d,w as M,wb as c,x as $}from"./chunk-M5NEZYJD.js";var K=class i{constructor(o){this.el=o}clickOutside=new f;onClick(o){this.el.nativeElement.contains(o)||this.clickOutside.emit()}static \u0275fac=function(e){return new(e||i)(w(oe))};static \u0275dir=re({type:i,selectors:[["","clickOutside",""]],hostBindings:function(e,t){e&1&&d("click",function(r){return t.onClick(r.target)},ie)},outputs:{clickOutside:"clickOutside"}})};var ge=de(fe),ve=ee(ge,i=>i.notes),ke=ee(ge,i=>i.loading);function Ce(i,o){if(i&1){let e=C();s(0,"div",2),d("click",function(){let n=_(e).$implicit,r=c();return m(r.onSelect(n.action))}),u(1),l()}if(i&2){let e=o.$implicit;a(),E(" ",e.label," ")}}var V=class i{options=[];position={x:0,y:0};optionSelected=new f;onSelect(o){this.optionSelected.emit(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=N({type:i,selectors:[["app-dropdown"]],inputs:{options:"options",position:"position"},outputs:{optionSelected:"optionSelected"},decls:2,vars:5,consts:[[1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0),b(1,Ce,2,1,"div",1),l()),e&2&&(L("top",t.position.y,"px")("right",t.position.x,"px"),a(),p("ngForOf",t.options))},dependencies:[O,P],styles:[".dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:9999;background:#fff;border:1px solid #ccc;border-radius:4px;min-width:150px;box-shadow:0 2px 8px #00000026}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]})};function xe(i,o){if(i&1&&g(0,"iconify-icon",3),i&2){let e=c();y(e.icon),p("icon",e.icon)}}function Ne(i,o){if(i&1&&(s(0,"p"),u(1),l()),i&2){let e=c();a(),x(e.label)}}var G=class i{constructor(o,e){this.vcr=o;this.injector=e}label;icon;disabled=!1;customClass="";options=[];clicked=new f;optionSelected=new f;isOpen=!1;dropdownRef;onClick(o){this.disabled||this.clicked.emit(o)}toggleMenu(o){if(o.stopPropagation(),this.dropdownRef){this.dropdownRef.destroy(),this.dropdownRef=void 0;return}let e=o.target.getBoundingClientRect(),t={x:e.left,y:e.bottom+4};this.dropdownRef=this.vcr.createComponent(V,{injector:this.injector}),this.dropdownRef.instance.options=this.options,this.dropdownRef.instance.position=t,this.dropdownRef.instance.optionSelected.subscribe(n=>{this.optionSelected.emit(n),this.dropdownRef?.destroy(),this.dropdownRef=void 0})}onSelect(o,e){e.stopPropagation(),this.optionSelected.emit(o),this.isOpen=!1}closeMenu(){this.isOpen=!1}static \u0275fac=function(e){return new(e||i)(w(F),w(j))};static \u0275cmp=N({type:i,selectors:[["app-button-feature"]],inputs:{label:"label",icon:"icon",disabled:"disabled",customClass:"customClass",options:"options"},outputs:{clicked:"clicked",optionSelected:"optionSelected"},decls:3,vars:5,consts:[["type","button",3,"click","disabled"],["aria-hidden","true",3,"icon","class",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",3,"icon"]],template:function(e,t){e&1&&(s(0,"button",0),d("click",function(r){return t.options.length?t.toggleMenu(r):t.onClick(r)}),b(1,xe,1,3,"iconify-icon",1)(2,Ne,2,1,"p",2),l()),e&2&&(y(t.customClass),p("disabled",t.disabled),a(),p("ngIf",t.icon),a(),p("ngIf",t.label))},dependencies:[O,S],styles:["button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-content:center;gap:.4em;padding:.5rem .6rem;margin:.5rem 0;font-size:1rem;border-radius:8px;border:none;cursor:pointer;background-color:transparent;color:var(--feature-button-color);box-sizing:border-box}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){color:var(--feature-button-color-hover);background-color:var(--feature-button-hover-background-color)}button[_ngcontent-%COMP%]:hover:not(:disabled)   iconify-icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:hover:not(:disabled)   p[_ngcontent-%COMP%]{color:var(--feature-button-color-hover)}label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:var(--feature-button-color);font-size:16px;padding:0;margin:0}"]})};var ye=()=>({label:"Add to notebook",action:"addToNotebook"}),Pe=()=>({label:"Delete note",action:"delete"}),Ve=()=>({label:"Add checkboxes",action:"addToNotebook"}),Ee=(i,o,e)=>[i,o,e];function Te(i,o){if(i&1&&(s(0,"div",16),g(1,"img",17),l()),i&2){let e=o.$implicit;a(),p("src",e,ne)}}function Ie(i,o){if(i&1&&(s(0,"div",14),b(1,Te,2,1,"div",15),l()),i&2){let e=c();a(),p("ngForOf",e.note.images)}}var J=class i{constructor(o){this.store=o;this.notebooks$=this.store.select(q)}note;open=new f;delete=new f;togglePin=new f;optionSelected=new f;addToNotebook=new f;notebooks$;onOpen(){this.open.emit(this.note)}onDelete(o){o.stopPropagation(),this.delete.emit(this.note.id)}onTogglePin(o){this.togglePin.emit({note:this.note,event:o})}onOptionSelected(o){switch(o){case"addToNotebook":this.optionSelected.emit("addToNotebook"),this.addToNotebook.emit(this.note);break;case"delete":this.onDelete({stopPropagation:()=>{}});break}}openAddToNotebookModal(o){this.notebooks$.subscribe(e=>{let t=e.map(v=>v.name).join(", "),n=prompt(`Enter notebook name to add note to (available: ${t}):`);if(!n)return;let r=e.find(v=>v.name.toLowerCase()===n.toLowerCase());if(!r){alert("Notebook not found!");return}this.addNoteToNotebook(o,r)}).unsubscribe()}addNoteToNotebook(o,e){if(e.notes.some(n=>n.id===o.id)){alert("Note already in this notebook");return}let t=A(I({},e),{notes:[...e.notes,o]});this.store.dispatch(U({update:{id:t.id,changes:{notes:t.notes}}}))}static \u0275fac=function(e){return new(e||i)(w(H))};static \u0275cmp=N({type:i,selectors:[["app-note"]],inputs:{note:"note"},outputs:{open:"open",delete:"delete",togglePin:"togglePin",optionSelected:"optionSelected",addToNotebook:"addToNotebook"},decls:18,vars:16,consts:[[3,"click"],[1,"note-title"],["class","image-preview",4,"ngIf"],[1,"buttons-container",3,"click"],[1,"left-buttons"],["customClass","image-button","icon","cuida:image-outline","title","Upload image"],["customClass","archive-button","icon","mage:archive","title","Archive note"],["customClass","reminder-button","icon","carbon:reminder","title","Add reminder"],["customClass","add-to-notebook-button","icon","fluent:notebook-arrow-curve-down-20-regular","title","Add to notebook",3,"clicked"],["customClass","add-to-notebook-button","icon","mage:trash","title","Delete note",3,"clicked"],[1,"three-dot-button-container"],["customClass","three-dot-container","icon","bi:three-dots-vertical","title","More",3,"optionSelected","options"],[1,"pin-icon"],[1,"bi",3,"click","ngClass","title"],[1,"image-preview"],["class","image-wrapper",4,"ngFor","ngForOf"],[1,"image-wrapper"],[1,"preview-thumbnail",3,"src"]],template:function(e,t){e&1&&(s(0,"li",0),d("click",function(){return t.onOpen()}),s(1,"div")(2,"h3",1),u(3),l(),s(4,"p"),u(5),l(),b(6,Ie,2,1,"div",2),l(),s(7,"div",3),d("click",function(r){return r.stopPropagation()}),s(8,"div",4),g(9,"app-button-feature",5)(10,"app-button-feature",6)(11,"app-button-feature",7),s(12,"app-button-feature",8),d("clicked",function(){return t.openAddToNotebookModal(t.note)}),l(),s(13,"app-button-feature",9),d("clicked",function(r){return t.onDelete(r)}),l()(),s(14,"div",10)(15,"app-button-feature",11),d("optionSelected",function(r){return t.onOptionSelected(r)}),l()()(),s(16,"div",12)(17,"i",13),d("click",function(r){return t.onTogglePin(r)}),l()()()),e&2&&(L("background-color",t.note.color||"#ffffff"),a(3),x(t.note.title),a(2),x(t.note.content),a(),p("ngIf",t.note.images==null?null:t.note.images.length),a(9),p("options",ce(12,Ee,z(9,ye),z(10,Pe),z(11,Ve))),a(2),p("title",le(t.note.pinned?"Unpin":"Pin"))("ngClass",t.note.pinned?"bi-pin-fill":"bi-pin"))},dependencies:[O,ae,P,S,G],styles:["li[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:6px;min-height:120px;height:auto;padding:1rem;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;cursor:default;overflow:hidden;transition:all .2s ease;outline:.5px solid rgba(150,150,150,.3)}li[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}.note-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;line-height:1.3}p[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:18pt;color:#141414;display:-webkit-box;-webkit-line-clamp:10;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-height:220px;white-space:pre-wrap}.image-preview[_ngcontent-%COMP%]{display:flex;gap:6px;margin-top:.5rem}.preview-thumbnail[_ngcontent-%COMP%]{height:60px;width:auto;object-fit:cover;border-radius:4px}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1rem;opacity:0;pointer-events:none;transition:opacity .2s ease-in-out}li[_ngcontent-%COMP%]:hover   .buttons-container[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.left-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.three-dot-button-container[_ngcontent-%COMP%]{display:flex;align-items:center}.pin-icon[_ngcontent-%COMP%]{position:absolute;top:14px;right:14px;padding:4px 6px 2px;cursor:pointer;font-size:1.2rem;color:var(--feature-button-color);z-index:10}.pin-icon[_ngcontent-%COMP%]:hover{color:var(--feature-button-hover-color);background-color:var(--feature-button-hover-background-color);border-radius:8px}"]})};function Ae(i,o){if(i&1&&g(0,"iconify-icon",3),i&2){let e=c();y(e.icon),p("icon",e.icon)}}function $e(i,o){if(i&1&&(s(0,"p"),u(1),l()),i&2){let e=c();a(),x(e.label)}}var Q=class i{constructor(o,e){this.vcr=o;this.injector=e}label;icon;disabled=!1;customClass="";options=[];clicked=new f;optionSelected=new f;isOpen=!1;dropdownRef;onClick(o){this.disabled||this.clicked.emit(o)}toggleMenu(o){if(o.stopPropagation(),this.dropdownRef){this.dropdownRef.destroy(),this.dropdownRef=void 0;return}let e=o.target.getBoundingClientRect(),t={x:e.left,y:e.bottom+4};this.dropdownRef=this.vcr.createComponent(V,{injector:this.injector}),this.dropdownRef.instance.options=this.options,this.dropdownRef.instance.position=t,this.dropdownRef.instance.optionSelected.subscribe(n=>{this.optionSelected.emit(n),this.dropdownRef?.destroy(),this.dropdownRef=void 0})}onSelect(o,e){e.stopPropagation(),this.optionSelected.emit(o),this.isOpen=!1}closeMenu(){this.isOpen=!1}static \u0275fac=function(e){return new(e||i)(w(F),w(j))};static \u0275cmp=N({type:i,selectors:[["app-button-main"]],inputs:{label:"label",icon:"icon",disabled:"disabled",customClass:"customClass",options:"options"},outputs:{clicked:"clicked",optionSelected:"optionSelected"},decls:3,vars:5,consts:[["type","button",3,"click","disabled"],["aria-hidden","true",3,"icon","class",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",3,"icon"]],template:function(e,t){e&1&&(s(0,"button",0),d("click",function(r){return t.options.length?t.toggleMenu(r):t.onClick(r)}),b(1,Ae,1,3,"iconify-icon",1)(2,$e,2,1,"p",2),l()),e&2&&(y(t.customClass),p("disabled",t.disabled),a(),p("ngIf",t.icon),a(),p("ngIf",t.label))},dependencies:[O,S],styles:["button[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;gap:.4em;padding:.8rem 1.2rem;margin:1rem 0;font-size:1rem;border-radius:8px;border:none;cursor:pointer;background-color:#98aeae;color:#fff;box-sizing:border-box;box-shadow:0 2px 8px #0000004d}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}button[_ngcontent-%COMP%]:hover:not(:disabled){color:var(--feature-button-color-hover);background-color:var(--sidebar-gradient-color3)}button[_ngcontent-%COMP%]:hover:not(:disabled)   iconify-icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:hover:not(:disabled)   p[_ngcontent-%COMP%]{color:#fff}label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#fff;font-size:16px;padding:0;margin:0}"]})};function Be(i,o){i&1&&(s(0,"div"),u(1,"Loading the notes ..."),l())}function De(i,o){i&1&&(s(0,"div",5)(1,"p"),g(2,"i",6),u(3,"No notes yet. Add one!"),l()())}function Re(i,o){if(i&1&&(s(0,"div",5)(1,"p"),g(2,"i",7),u(3,'No notes match your search "'),s(4,"strong"),u(5),l(),u(6,'" '),l()()),i&2){let e=c();a(5),x(e.searchTerm)}}function je(i,o){if(i&1){let e=C();s(0,"div",23),d("click",function(n){return _(e),m(n.stopPropagation())})("clickOutside",function(){_(e);let n=c(4);return m(n.openNotebookOptionsId=null)}),s(1,"button",24),d("click",function(){_(e);let n=c().$implicit,r=c(3);return m(r.startEditingNotebook(n))}),u(2,"Edit"),l(),s(3,"button",24),d("click",function(){_(e);let n=c().$implicit,r=c(3);return m(r.deleteNotebook(n.id))}),u(4,"Delete"),l()()}}function Fe(i,o){if(i&1){let e=C();s(0,"div",12)(1,"div",13)(2,"div",14),d("click",function(){let n=_(e).$implicit,r=c(3);return m(r.selectNotebook(n))}),g(3,"iconify-icon",15)(4,"iconify-icon",16),s(5,"h3",17),u(6),l(),s(7,"div",18),d("click",function(){let n=_(e).$implicit,r=c(3);return m(r.selectNotebook(n))}),s(8,"div",19),u(9),l(),s(10,"div")(11,"button",20),d("click",function(n){let r=_(e).$implicit;return c(3).toggleNotebookOptions(r.id),m(n.stopPropagation())}),g(12,"i",21),l()()()(),b(13,je,5,0,"div",22),l()()}if(i&2){let e=o.$implicit,t=c(3);a(6),x(e.name),a(3),E(" ",e.notes.length," notes "),a(4),p("ngIf",t.openNotebookOptionsId===e.id)}}function Le(i,o){if(i&1&&(X(0),b(1,Fe,14,3,"div",11),k(2,"async"),Z()),i&2){let e=c(2);a(),p("ngForOf",h(2,1,e.notebooks$))}}function ze(i,o){if(i&1){let e=C();s(0,"div",23),d("click",function(n){return _(e),m(n.stopPropagation())})("clickOutside",function(){_(e);let n=c(3);return m(n.openNotebookOptionsId=null)}),s(1,"button",24),d("click",function(){_(e);let n=c(3);return m(n.startEditingNotebook(n.selectedNotebook))}),u(2," Edit "),l(),s(3,"button",24),d("click",function(){_(e);let n=c(3);return m(n.deleteNotebook(n.selectedNotebook.id))}),u(4," Delete "),l()()}}function He(i,o){if(i&1){let e=C();X(0),s(1,"div",12)(2,"div",13)(3,"div",14),d("click",function(){_(e);let n=c(2);return m(n.selectNotebook(n.selectedNotebook))}),g(4,"iconify-icon",15)(5,"iconify-icon",16),s(6,"h3",17),u(7),l(),s(8,"div",25)(9,"div",19),u(10),l(),s(11,"div")(12,"button",20),d("click",function(n){_(e);let r=c(2);return r.toggleNotebookOptions(r.selectedNotebook.id),m(n.stopPropagation())}),g(13,"i",21),l()()()(),b(14,ze,5,0,"div",22),l()(),Z()}if(i&2){let e=c(2);a(7),x(e.selectedNotebook.name),a(3),E(" ",e.selectedNotebook.notes.length," notes "),a(4),p("ngIf",e.openNotebookOptionsId===e.selectedNotebook.id)}}function Ue(i,o){if(i&1&&(s(0,"div",8)(1,"h3",9),u(2,"NOTEBOOKS"),l(),s(3,"div",10),b(4,Le,3,3,"ng-container",1)(5,He,15,3,"ng-container",1),l()()),i&2){let e=c();a(4),p("ngIf",!e.selectedNotebook),a(),p("ngIf",e.selectedNotebook)}}function qe(i,o){if(i&1){let e=C();s(0,"app-note",30),d("open",function(n){_(e);let r=c(2);return m(r.openNoteModal(n))})("delete",function(n){_(e);let r=c(2);return m(r.deleteNote(n))})("togglePin",function(n){_(e);let r=c(2);return m(r.togglePin(n.note,n.event))})("optionSelected",function(n){let r=_(e).$implicit,v=c(2);return m(v.handleNoteOptionSelected(n,r))}),l()}if(i&2){let e=o.$implicit;p("note",e)}}function Ke(i,o){if(i&1){let e=C();s(0,"div",8)(1,"h3",9),u(2),l(),s(3,"div",26)(4,"app-button-main",27),d("clicked",function(){_(e);let n=c();return m(n.closeNotebook())}),l()(),s(5,"ul",28),b(6,qe,1,1,"app-note",29),l()()}if(i&2){let e=c();a(2),se(' NOTES IN "',e.selectedNotebook.name," (",e.selectedNotebook.notes.length,')" '),a(4),p("ngForOf",e.selectedNotebook.notes)}}function Ye(i,o){if(i&1){let e=C();s(0,"app-note",30),d("open",function(n){_(e);let r=c(2);return m(r.openNoteModal(n))})("delete",function(n){_(e);let r=c(2);return m(r.deleteNote(n))})("togglePin",function(n){_(e);let r=c(2);return m(r.togglePin(n.note,n.event))})("optionSelected",function(n){let r=_(e).$implicit,v=c(2);return m(v.handleNoteOptionSelected(n,r))}),l()}if(i&2){let e=o.$implicit;p("note",e)}}function We(i,o){if(i&1&&(s(0,"div",8)(1,"h3",9),u(2,"PINNED"),l(),s(3,"ul",28),b(4,Ye,1,1,"app-note",29),k(5,"async"),l()()),i&2){let e=c();a(4),p("ngForOf",h(5,1,e.pinnedNotes$))}}function Ge(i,o){if(i&1){let e=C();s(0,"app-note",30),d("open",function(n){_(e);let r=c(2);return m(r.openNoteModal(n))})("delete",function(n){_(e);let r=c(2);return m(r.deleteNote(n))})("togglePin",function(n){_(e);let r=c(2);return m(r.togglePin(n.note,n.event))})("optionSelected",function(n){let r=_(e).$implicit,v=c(2);return m(v.handleNoteOptionSelected(n,r))}),l()}if(i&2){let e=o.$implicit;p("note",e)}}function Je(i,o){if(i&1&&(s(0,"div",8)(1,"h3",9),u(2,"NOTES"),l(),s(3,"ul"),b(4,Ge,1,1,"app-note",29),k(5,"async"),l()()),i&2){let e=c();a(4),p("ngForOf",h(5,1,e.filteredNotes$))}}var he=class i{constructor(o,e){this.store=o;this.eventBus=e;this.isLoading$=this.store.select(ke),this.allNotes$=this.store.select(ve),this.notebooks$=this.store.select(q),this.filteredNotes$=$([this.allNotes$,this.searchTermSubject.asObservable().pipe(B(300),D(),R(""))]).pipe(M(([t,n])=>this.filterNotes(t.filter(r=>!r.pinned),n))),this.pinnedNotes$=$([this.allNotes$.pipe(M(t=>t.filter(n=>n.pinned))),this.searchTermSubject.asObservable().pipe(B(300),D(),R(""))]).pipe(M(([t,n])=>this.filterNotes(t,n))),this.filteredNotebooks$=$([this.notebooks$,this.searchTermSubject.asObservable().pipe(B(300),D(),R(""))]).pipe(M(([t,n])=>this.filterNotebooks(t,n))),this.hasNotes$=this.allNotes$.pipe(M(t=>t.length>0)),this.hasNotebooks$=this.notebooks$.pipe(M(t=>t.length>0)),this.hasPins$=this.pinnedNotes$.pipe(M(t=>t.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(M(t=>t.length>0))}noteSelected=new f;notebookSelected=new f;editNotebookRequested=new f;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;searchTermSubject=new te("");ngOnInit(){}onSearchTermChange(o){this.searchTerm=o,this.searchTermSubject.next(o)}filterNotes(o,e){let t=o;if(e){let n=e.toLowerCase();t=o.filter(r=>r.title.toLowerCase().includes(n)||r.content.toLowerCase().includes(n))}try{return[...t].sort((n,r)=>(r.createdAt||0)-(n.createdAt||0))}catch(n){return console.error("Sorting failed:",n,t),t}}openNoteModal(o){this.eventBus.emitNoteSelected(o)}deleteNote(o){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(_e({id:o}))}togglePin(o,e){e.stopPropagation(),this.store.dispatch(me({id:o.id}))}filterNotebooks(o,e){if(!e)return o;let t=e.toLowerCase();return o.filter(n=>n.name.toLowerCase().includes(t))}selectNotebook(o){this.selectedNotebook=o,this.eventBus.emitNotebookSelected(o)}deleteNotebook(o){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(ue({id:o}))}closeNotebook(){this.selectedNotebook=null}toggleNotebookOptions(o){this.openNotebookOptionsId=this.openNotebookOptionsId===o?null:o}startEditingNotebook(o){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(o)}handleNoteOptionSelected(o,e){switch(o){case"addToNotebook":this.openAddToNotebookModal(e);break;case"delete":this.deleteNote(e.id);break}}openAddToNotebookModal(o){this.notebooks$.subscribe(e=>{let t=e.map(v=>v.name).join(", "),n=prompt(`Enter notebook name to add note to (available: ${t}):`);if(!n)return;let r=e.find(v=>v.name.toLowerCase()===n.toLowerCase());if(!r){alert("Notebook not found!");return}this.addNoteToNotebook(o,r)}).unsubscribe()}addNoteToNotebook(o,e){if(e.notes.some(n=>n.id===o.id)){alert("Note already in this notebook");return}let t=A(I({},e),{notes:[...e.notes,o]});this.store.dispatch(U({update:{id:t.id,changes:{notes:t.notes}}}))}static \u0275fac=function(e){return new(e||i)(w(H),w(be))};static \u0275cmp=N({type:i,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:19,vars:27,consts:[[1,"all-view"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"secondary-background"],["class","section",4,"ngIf"],[1,"empty-state"],[1,"bi","bi-emoji-frown","me-2"],[1,"bi","bi-search","me-2"],[1,"section"],[1,"section-title"],["id","notebooksContainer",1,"notebooks-row"],["class","notebook-item",4,"ngFor","ngForOf"],[1,"notebook-item"],[1,"notebook-box"],[1,"notebook-header",3,"click"],["icon","fluent:notebook-subsection-24-filled",1,"icon-default"],["icon","solar:notebook-minimalistic-bold-duotone",1,"icon-hover"],[1,"notebook-title"],[1,"notebook-meta",3,"click"],[1,"ntbk-note-count"],["title","More",1,"ntbk-three-dots",3,"click"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu",3,"click","clickOutside",4,"ngIf"],[1,"dropdown-menu",3,"click","clickOutside"],[3,"click"],[1,"notebook-meta"],[1,"close-button-container-in-list"],["label","Close Notebook",1,"close-notebook-button",3,"clicked"],[1,"note-grid"],[3,"note","open","delete","togglePin","optionSelected",4,"ngFor","ngForOf"],[3,"open","delete","togglePin","optionSelected","note"]],template:function(e,t){if(e&1&&(s(0,"div",0),b(1,Be,2,0,"div",1),k(2,"async"),b(3,De,4,0,"div",2),k(4,"async"),k(5,"async"),b(6,Re,7,1,"div",2),k(7,"async"),k(8,"async"),k(9,"async"),k(10,"async"),g(11,"div",3),b(12,Ue,6,2,"div",4),k(13,"async"),b(14,Ke,7,3,"div",4)(15,We,6,3,"div",4),k(16,"async"),b(17,Je,6,3,"div",4),k(18,"async"),l()),e&2){let n;a(),p("ngIf",h(2,7,t.isLoading$)),a(2),p("ngIf",!h(4,9,t.isLoading$)&&!h(5,11,t.hasNotes$)),a(3),p("ngIf",!h(7,13,t.isLoading$)&&((n=h(8,15,t.filteredNotes$))==null?null:n.length)===0&&h(9,17,t.pinnedNotes$)&&((n=h(10,19,t.filteredNotebooks$))==null?null:n.length)===0&&t.searchTerm),a(6),p("ngIf",h(13,21,t.hasNotebooks$)),a(2),p("ngIf",t.selectedNotebook),a(),p("ngIf",h(16,23,t.hasPins$)&&!t.selectedNotebook),a(2),p("ngIf",h(18,25,t.hasUnpinnedNotes$)&&!t.selectedNotebook)}},dependencies:[O,P,S,pe,K,J,Q],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 4rem;width:calc(100% - 280px);margin-left:280px;margin-top:86px;box-sizing:border-box}.secondary-bacgkround[_ngcontent-%COMP%]{position:absolute;background-color:red;top:0;height:50%;width:50%}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--feature-button-color);font-weight:600;margin-bottom:1rem}.notebooks-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:1.5rem}.notebooks-row[_ngcontent-%COMP%]   .notebook-item[_ngcontent-%COMP%]{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:18px;cursor:pointer;transition:all .2s ease;position:relative}.notebooks-row[_ngcontent-%COMP%]   .notebook-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #43868626;transform:translateY(-2px)}.notebooks-row[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column}.notebooks-row[_ngcontent-%COMP%]   iconify-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#4e4e4e99;font-size:2rem;margin-bottom:1rem}.notebooks-row[_ngcontent-%COMP%]   .icon-hover[_ngcontent-%COMP%], .notebooks-row[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]:hover   .icon-default[_ngcontent-%COMP%]{display:none}.notebooks-row[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]:hover   .icon-hover[_ngcontent-%COMP%]{display:inline-block}.notebooks-row[_ngcontent-%COMP%]   .ntbk-three-dots[_ngcontent-%COMP%]{top:14px;right:14px;background-color:transparent;padding:2px 6px;border:none;border-radius:8px;color:var(--feature-button-color);opacity:0}.notebooks-row[_ngcontent-%COMP%]   .ntbk-three-dots[_ngcontent-%COMP%]:hover{color:var(--feature-button-hover-color);background-color:var(--feature-button-hover-background-color)}.notebooks-row[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;bottom:-50px;right:0;background:#fff;border:1px solid #ccc;z-index:1000;padding:0;box-shadow:0 4px 8px #0000001a;min-width:120px;display:flex;flex-direction:column;gap:2px}.notebooks-row[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;text-align:left;background:none;border:none;border-radius:0;padding:4px 12px;width:100%;cursor:pointer}.notebooks-row[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.notebooks-row[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#6b7280;font-size:.875rem;margin:0}.notebooks-row[_ngcontent-%COMP%]   .notebook-item[_ngcontent-%COMP%]:hover   .ntbk-three-dots[_ngcontent-%COMP%]{opacity:1}.notes-grid[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;padding:0;margin:0;list-style-type:none}.close-button-container[_ngcontent-%COMP%]{margin:0;padding:0;flex-direction:row;align-items:center;justify-content:center;position:absolute;top:0;right:0;z-index:1099;display:flex;flex-direction:column;gap:2px}"]})};export{he as AllView};
