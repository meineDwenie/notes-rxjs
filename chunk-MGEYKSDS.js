import{a as le}from"./chunk-GUES7C6T.js";import{g as G,m as F,n as te,q as ne,r as re,s as ce}from"./chunk-EKU5Z4EG.js";import{B as oe,C as ie,D as L,n as J,v as Q,w as X,x as Z,y as ee}from"./chunk-KBODP7Z6.js";import{j as Y,l as H,m as K,o as W}from"./chunk-5IK5MZEV.js";import{Ab as A,Bb as u,Cb as a,H as v,Ib as j,J as B,Kb as b,Lb as I,M as N,Nb as R,Oa as s,Ta as w,Vb as q,Wb as p,Xb as g,Za as z,a as E,b as T,cb as D,eb as x,ob as y,pa as d,pb as f,qa as _,rb as k,ub as S,vb as V,w as m,wb as M,x as h,xb as c,yb as l,zb as O}from"./chunk-5VIB32CO.js";var se=(r,t)=>({"background-color":r,"right.px":t});function de(r,t){r&1&&(c(0,"div",1),O(1,"i",4),b(2," Loading your content... "),l())}function _e(r,t){r&1&&(c(0,"div",2)(1,"div",5),O(2,"i",6),l(),c(3,"h2"),b(4,"Welcome to Noteboard!"),l(),c(5,"p"),b(6,"Start by creating your first note or notebook."),l()())}function pe(r,t){if(r&1&&(c(0,"div",2)(1,"div",5),O(2,"i",7),l(),c(3,"h3"),b(4,"No results found"),l(),c(5,"p"),b(6,'No notes or notebooks match "'),c(7,"strong"),b(8),l(),b(9,'"'),l()()),r&2){let e=a();s(8),I(e.searchTerm)}}function ge(r,t){if(r&1&&O(0,"div",28),r&2){let e=t.$implicit,i=t.index;M("ngStyle",q(1,se,e.color||"#ccc",i*20))}}function be(r,t){if(r&1){let e=A();c(0,"div",13),u("click",function(){let n=d(e).$implicit,o=a(4);return _(o.openNotebook(n))}),O(1,"div",14),c(2,"div",15)(3,"div",16),D(4,ge,1,4,"div",17),l(),c(5,"div",18)(6,"div",19),O(7,"iconify-icon",20)(8,"iconify-icon",21),c(9,"h3",22),b(10),l()(),c(11,"div",23)(12,"span",24),b(13),l(),c(14,"div",25),u("click",function(n){return d(e),_(n.stopPropagation())}),c(15,"app-button-feature",26),u("clicked",function(){let n=d(e).$implicit,o=a(4);return _(o.editNotebook(n))}),l(),c(16,"app-button-feature",27),u("clicked",function(){let n=d(e).$implicit,o=a(4);return _(o.deleteNotebook(n.id))}),l()()()()()()}if(r&2){let e=t.$implicit;s(2),j("has-notes",e.notes.length>0)("empty",e.notes.length===0),s(2),M("ngForOf",e.notes.slice(0,8)),s(6),I(e.name),s(3),R(" ",e.notes.length," ",e.notes.length<=1?"note":"notes"," ")}}function Ce(r,t){if(r&1&&(c(0,"div",8)(1,"div",9)(2,"h2",10),b(3,"NOTEBOOKS"),l()(),c(4,"div",11),S(5,be,17,8,"div",12,y().trackByNotebookId,!0),p(7,"async"),l()()),r&2){let e=a(3);s(5),V(g(7,0,e.filteredNotebooks$))}}function me(r,t){if(r&1){let e=A();c(0,"app-note",31),u("open",function(n){d(e);let o=a(4);return _(o.openNoteModal(n))})("delete",function(n){d(e);let o=a(4);return _(o.deleteNote(n))})("togglePin",function(n){d(e);let o=a(4);return _(o.togglePin(n.note,n.event))})("imageUpload",function(n){d(e);let o=a(4);return _(o.handleImageUpload(n))})("triggerEdit",function(n){d(e);let o=a(4);return _(o.openNoteModal(n))}),l()}if(r&2){let e=t.$implicit;M("note",e)}}function fe(r,t){if(r&1&&(c(0,"div",8)(1,"div",9)(2,"h2",10),b(3,"PINNED"),l()(),c(4,"div",29),S(5,me,1,1,"app-note",30,y().trackByNoteId,!0),p(7,"async"),l()()),r&2){let e=a(3);s(5),V(g(7,0,e.pinnedNotes$))}}function ke(r,t){if(r&1){let e=A();c(0,"app-note",31),u("open",function(n){d(e);let o=a(4);return _(o.openNoteModal(n))})("delete",function(n){d(e);let o=a(4);return _(o.deleteNote(n))})("togglePin",function(n){d(e);let o=a(4);return _(o.togglePin(n.note,n.event))})("imageUpload",function(n){d(e);let o=a(4);return _(o.handleImageUpload(n))})("triggerEdit",function(n){d(e);let o=a(4);return _(o.openNoteModal(n))}),l()}if(r&2){let e=t.$implicit;M("note",e)}}function Oe(r,t){if(r&1&&(c(0,"div",8)(1,"div",9)(2,"h2",10),b(3,"NOTES"),l()(),c(4,"div",29),S(5,ke,1,1,"app-note",30,y().trackByNoteId,!0),p(7,"async"),l()()),r&2){let e=a(3);s(5),V(g(7,0,e.filteredNotes$))}}function ue(r,t){if(r&1&&(f(0,Ce,8,2,"div",8),f(1,fe,8,2,"div",8),p(2,"async"),f(3,Oe,8,2,"div",8),p(4,"async")),r&2){let e=a(2);k(t.length>0&&!e.selectedNotebook?0:-1),s(),k(g(2,3,e.hasPins$)&&!e.selectedNotebook?1:-1),s(2),k(g(4,5,e.hasUnpinnedNotes$)&&!e.selectedNotebook?3:-1)}}function Pe(r,t){if(r&1&&(c(0,"div",3),f(1,ue,5,7),p(2,"async"),l()),r&2){let e,i=a();s(),k((e=g(2,1,i.filteredNotebooks$))?1:-1,e)}}var ae=class r{constructor(t,e,i){this.store=t;this.eventBus=e;this.router=i;this.isLoading$=this.store.select(ie),this.allNotes$=this.store.select(oe),this.notebooks$=this.store.select(ne);let n=this.store.select(L);this.filteredNotes$=h([this.allNotes$,n.pipe(v(300),N())]).pipe(m(([o,C])=>this.filterNotes(o.filter(P=>!P.pinned),C))),this.pinnedNotes$=h([this.allNotes$.pipe(m(o=>o.filter(C=>C.pinned))),n.pipe(v(300),N())]).pipe(m(([o,C])=>this.filterNotes(o,C))),this.filteredNotebooks$=h([this.notebooks$,n.pipe(v(300),N())]).pipe(m(([o,C])=>this.filterNotebooks(o,C))),this.hasNotes$=this.allNotes$.pipe(m(o=>o.length>0)),this.hasNotebooks$=this.notebooks$.pipe(m(o=>o.length>0)),this.hasPins$=this.pinnedNotes$.pipe(m(o=>o.length>0)),this.hasUnpinnedNotes$=this.filteredNotes$.pipe(m(o=>o.length>0)),this.store.select(L).subscribe(o=>{this.searchTerm=o})}noteSelected=new x;notebookSelected=new x;editNotebookRequested=new x;allNotes$;filteredNotes$;filteredNotebooks$;pinnedNotes$;notebooks$;isLoading$;hasNotes$;hasNotebooks$;hasPins$;hasUnpinnedNotes$;searchTerm="";selectedNotebook=null;openNotebookOptionsId=null;ngOnInit(){}filterNotes(t,e){let i=t;if(e){let n=e.toLowerCase();i=t.filter(o=>o.title.toLowerCase().includes(n)||o.content.toLowerCase().includes(n))}try{return[...i].sort((n,o)=>(o.createdAt||0)-(n.createdAt||0))}catch(n){return console.error("Sorting failed:",n,i),i}}openNoteModal(t,e=!1){this.eventBus.openNoteInEditMode(t,e)}deleteNote(t){confirm("Are you sure you want to delete this note?")&&this.store.dispatch(X({id:t}))}togglePin(t,e){e.stopPropagation(),this.store.dispatch(Z({id:t.id}))}handleImageUpload(t){this.filteredNotes$.pipe(B(1)).subscribe(e=>{let i=e.find(n=>n.id===t.noteId);if(i){let n=[...i.images||[],...t.images],o={id:i.id,changes:{images:n,updatedAt:Date.now()}};this.store.dispatch(Q({update:o})),this.notebooks$.pipe(m(C=>C.filter(P=>P.notes.some($=>$.id===i.id))),B(1)).subscribe(C=>{C.forEach(P=>{let $=P.notes.map(U=>U.id===i.id?T(E({},i),{images:n,updatedAt:Date.now()}):U);this.store.dispatch(F({update:{id:P.id,changes:{notes:$}}}))})})}})}filterNotebooks(t,e){if(!e)return t;let i=e.toLowerCase();return t.filter(n=>n.name.toLowerCase().includes(i))}selectNotebook(t){this.selectedNotebook=t,this.eventBus.emitNotebookSelected(t)}deleteNotebook(t){confirm("Are you sure you want to delete this notebook?")&&this.store.dispatch(te({id:t}))}closeNotebook(){this.selectedNotebook=null}startEditingNotebook(t){this.openNotebookOptionsId=null,this.eventBus.emitNotebookEdit(t)}addNoteToNotebook(t,e){if(e.notes.some(o=>o.id===t.id)){alert("Note already in this notebook");return}let i={id:t.id,title:t.title||"Untitled Note",content:t.content||"",color:t.color,pinned:t.pinned,createdAt:t.createdAt},n=T(E({},e),{notes:[...e.notes,i],updatedAt:Date.now()});this.store.dispatch(F({update:{id:n.id,changes:{notes:n.notes}}}))}trackByNotebookId(t,e){return e.id}trackByNoteId(t,e){return e.id}createNewNote(){this.eventBus.emitCreateNote()}createNewNotebook(){this.eventBus.emitCreateNotebook()}clearSearch(){this.searchTerm="",this.store.dispatch(ee({term:""}))}openNotebook(t){this.router.navigate(["/notebooks",t.id])}editNotebook(t){this.startEditingNotebook(t)}static \u0275fac=function(e){return new(e||r)(w(J),w(re),w(G))};static \u0275cmp=z({type:r,selectors:[["app-all-view"]],outputs:{noteSelected:"noteSelected",notebookSelected:"notebookSelected",editNotebookRequested:"editNotebookRequested"},decls:13,vars:20,consts:[[1,"all-view"],[1,"loading-state"],[1,"empty-state"],[1,"content-sections"],[1,"bi","bi-arrow-clockwise"],[1,"empty-icon"],[1,"bi","bi-chat-quote",2,"font-size","3rem","color","#ccc"],[1,"bi","bi-search",2,"font-size","3rem","color","#ccc"],[1,"section"],[1,"section-header"],[1,"section-title"],[1,"notebooks-grid"],[1,"notebook-card"],[1,"notebook-card",3,"click"],[1,"notebook-back"],[1,"notebook-front"],[1,"note-tabs"],["class","note-tab",3,"ngStyle",4,"ngFor","ngForOf"],[1,"notebook-content"],[1,"notebook-header"],["icon","fluent:notebook-subsection-24-filled",1,"notebook-icon","default-icon"],["icon","solar:notebook-minimalistic-bold",1,"notebook-icon","hover-icon"],[1,"notebook-title"],[1,"notebook-meta"],[1,"note-count"],[1,"notebook-actions",3,"click"],["customClass","notebook-action-button","icon","fluent:edit-28-regular","title","Edit Notebook Title",3,"clicked"],["customClass","notebook-action-button","icon","mage:trash","title","Delete Notebook",3,"clicked"],[1,"note-tab",3,"ngStyle"],[1,"notes-grid"],[3,"note"],[3,"open","delete","togglePin","imageUpload","triggerEdit","note"]],template:function(e,i){if(e&1&&(c(0,"div",0),f(1,de,3,0,"div",1),p(2,"async"),f(3,_e,7,0,"div",2),p(4,"async"),p(5,"async"),p(6,"async"),f(7,pe,10,1,"div",2),p(8,"async"),p(9,"async"),p(10,"async"),f(11,Pe,3,3,"div",3),p(12,"async"),l()),e&2){let n;s(),k(g(2,4,i.isLoading$)?1:-1),s(2),k(!g(4,6,i.isLoading$)&&!g(5,8,i.hasNotes$)&&!g(6,10,i.hasNotebooks$)?3:-1),s(4),k(!g(8,12,i.isLoading$)&&i.searchTerm&&((n=g(9,14,i.filteredNotes$))==null?null:n.length)===0&&((n=g(10,16,i.filteredNotebooks$))==null?null:n.length)===0?7:-1),s(4),k(g(12,18,i.isLoading$)?-1:11)}},dependencies:[W,Y,H,K,le,ce],styles:[".all-view[_ngcontent-%COMP%]{position:relative;padding:2rem 3rem;width:calc(100% - 400px);height:auto;min-height:calc(100vh - 130px);margin-left:340px;margin-top:96px;margin-bottom:2rem;border:none;border-radius:20px;align-items:center;justify-content:center;box-sizing:border-box;background-color:#fff}.all-view[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;height:calc(100vh - 240px);margin-top:0;border-radius:8px}.all-view[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .all-view[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .all-view[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--header-search-bar-or-section-text-color);text-align:center}.all-view[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:600}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:1.5rem}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]{position:relative;width:100%;height:180px;cursor:pointer;transition:all .3s ease}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-back[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,#3a716ed1,#074540b3);border-radius:12px;box-shadow:0 4px 8px #00000026;transform:rotate(1deg);transition:all .3s ease}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-front[_ngcontent-%COMP%]{position:absolute;inset:6px -6px -6px 6px;background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e5e7eb;border-radius:8px;box-shadow:0 6px 12px #43868633;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);opacity:.95;transform:rotate(.5deg);transition:all .3s ease;overflow:hidden}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .note-tabs[_ngcontent-%COMP%]{position:absolute;top:-12px;right:14px;display:flex;flex-direction:row-reverse;gap:0;z-index:10;pointer-events:none}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .note-tabs[_ngcontent-%COMP%]   .note-tab[_ngcontent-%COMP%]{width:14px;height:24px;border-radius:2px;box-shadow:0 1px 2px #00000026;position:absolute;transition:all .2s ease}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-content[_ngcontent-%COMP%]{position:relative;z-index:2;padding:18px;height:100%;display:flex;flex-direction:column;justify-content:space-between;box-sizing:border-box}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-icon[_ngcontent-%COMP%]{align-items:center;justify-content:left;color:#43868670;font-size:1.5rem;margin-bottom:.5rem;transition:all .3s ease}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-header[_ngcontent-%COMP%]   .notebook-title[_ngcontent-%COMP%]{font-size:medium;margin:0;color:#000000d7;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-height:80px;white-space:pre-wrap;line-height:1.3}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]{display:flex;direction:row;align-items:center;justify-content:space-between;color:#5b5b5b;font-size:.875rem;margin:0}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]{display:flex;gap:0;align-items:center;opacity:0;transition:opacity .3s ease}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   .notebook-action-button[_ngcontent-%COMP%]{align-items:center;margin:0!important;background:#ffffffe6;border-radius:4px;transition:all .2s ease}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-meta[_ngcontent-%COMP%]   .notebook-actions[_ngcontent-%COMP%]   .notebook-action-button[_ngcontent-%COMP%]:hover{background:#fff;transform:translateY(-1px)}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .default-icon[_ngcontent-%COMP%]{display:block}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .hover-icon[_ngcontent-%COMP%]{display:none}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-front.empty[_ngcontent-%COMP%]{opacity:.75;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-front.empty[_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#e9ecef,#dee2e6);border-color:#ced4da}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-back[_ngcontent-%COMP%]{transform:rotate(-1deg) translateY(-1px);box-shadow:0 6px 12px #0003}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-front[_ngcontent-%COMP%]{transform:rotate(0) translateY(-2px);box-shadow:0 8px 16px #43868640;opacity:1;background:linear-gradient(135deg,#edffff,#fff);border-color:#96b8b8}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-front[_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#edffff,#f8f9fa);border-color:#96b8b8}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-actions[_ngcontent-%COMP%]{opacity:1}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-icon[_ngcontent-%COMP%]{color:#438686}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .notebook-title[_ngcontent-%COMP%]{color:var(--sidebar-gradient-color3)}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .default-icon[_ngcontent-%COMP%]{display:none}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .notebooks-grid[_ngcontent-%COMP%]   .notebook-card[_ngcontent-%COMP%]:hover   .hover-icon[_ngcontent-%COMP%]{display:block;color:#438686}.all-view[_ngcontent-%COMP%]   .content-sections[_ngcontent-%COMP%]   .notes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1.5rem;padding:0;margin:0}"]})};export{ae as AllView};
